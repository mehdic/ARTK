# ARTK Core v1 Sample Configuration
# This is a comprehensive example showing all available configuration options.

version: 1

# Application configuration
app:
  name: Sample Application
  type: spa
  baseUrl: ${APP_BASE_URL:-http://localhost:3000}

# Active environment
activeEnvironment: ${ACTIVE_ENV:-local}

# Environment configurations
environments:
  local:
    baseUrl: http://localhost:3000
    apiUrl: http://localhost:3000/api
  staging:
    baseUrl: https://staging.example.com
    apiUrl: https://staging.example.com/api
  production:
    baseUrl: https://app.example.com
    apiUrl: https://api.example.com

# Authentication configuration
auth:
  provider: oidc

  # Storage state settings
  storageState:
    directory: .auth-states
    maxAgeMinutes: 60

  # Role definitions
  roles:
    admin:
      credentialsEnv:
        username: APP_ADMIN_USER
        password: APP_ADMIN_PASS
    standardUser:
      credentialsEnv:
        username: APP_USER_EMAIL
        password: APP_USER_PASS
    readOnlyUser:
      credentialsEnv:
        username: APP_READONLY_USER
        password: APP_READONLY_PASS

  # OIDC configuration
  oidc:
    idpType: keycloak
    loginUrl: /auth/login
    success:
      url: /dashboard
      timeout: 5000
    mfa:
      enabled: false
      type: totp
      secretEnv: APP_TOTP_SECRET
    timeouts:
      loginFlow: 30000
      idpRedirect: 10000
      callback: 5000
      pushApproval: 60000

# Selector configuration
selectors:
  testIdAttribute: data-testid
  strategy:
    - role
    - label
    - placeholder
    - testid
    - text

# Assertions configuration
assertions:
  toast:
    containerSelector: '[role="alert"]'
    messageSelector: '.toast-message'
    typeAttribute: 'data-toast-type'
    timeout: 5000
  loading:
    selectors:
      - '[data-loading="true"]'
      - '.loading-spinner'
      - '[aria-busy="true"]'
    timeout: 30000
  form:
    errorSelector: '.field-error'
    formErrorSelector: '.form-error'

# Data configuration
data:
  namespace:
    prefix: artk
    suffix: runId
  cleanup:
    enabled: true
    onFailure: false
    parallel: true

# Fixtures configuration
fixtures:
  defaultRole: standardUser
  roleFixtures:
    - admin
    - standardUser
    - readOnlyUser
  api:
    baseURL: ${API_BASE_URL:-http://localhost:3000/api}

# Test tier configurations
tiers:
  smoke:
    retries: 0
    workers: 1
    timeout: 30000
    tag: '@smoke'
  release:
    retries: 2
    workers: 4
    timeout: 60000
    tag: '@release'
  regression:
    retries: 2
    workers: 8
    timeout: 120000
    tag: '@regression'

# Reporter configuration
reporters:
  html:
    enabled: true
    open: never
    outputFolder: test-results/html
  json:
    enabled: true
    outputFile: test-results/results.json
  junit:
    enabled: true
    outputFile: test-results/junit.xml
  artk:
    enabled: true
    outputFile: test-results/artk-report.json
    journeyMapping: true

# Artifacts configuration
artifacts:
  screenshots:
    mode: only-on-failure
    fullPage: false
  video:
    mode: retain-on-failure
    size:
      width: 1280
      height: 720
  trace:
    mode: retain-on-failure

# Browser configurations
browsers:
  enabled:
    - chromium
  viewport:
    width: 1280
    height: 720
  headless: true

# Journeys configuration
journeys:
  id:
    prefix: JRN
    width: 4
  layout: flat
  backlog:
    groupBy: tier
