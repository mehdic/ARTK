{"version":3,"sources":["../../src/journey/schema.ts","../../src/validate/journey.ts","../../src/validate/patterns.ts","../../src/validate/lint.ts","../../src/validate/tags.ts","../../src/validate/coverage.ts","../../src/validate/code.ts"],"names":["existsSync","err","DEFAULT_OPTIONS"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Journey Frontmatter Zod Schema\n * @see research/2026-01-02_autogen-refined-plan.md Section 8\n */\nimport { z } from 'zod';\n\n/**\n * Journey status enum\n */\nexport const JourneyStatusSchema = z.enum([\n  'proposed',\n  'defined',\n  'clarified',\n  'implemented',\n  'quarantined',\n  'deprecated',\n]);\n\n/**\n * Journey tier enum\n */\nexport const JourneyTierSchema = z.enum(['smoke', 'release', 'regression']);\n\n/**\n * Data strategy enum\n */\nexport const DataStrategySchema = z.enum(['seed', 'create', 'reuse']);\n\n/**\n * Cleanup strategy enum\n */\nexport const CleanupStrategySchema = z.enum(['required', 'best-effort', 'none']);\n\n/**\n * Completion signal type enum\n */\nexport const CompletionTypeSchema = z.enum(['url', 'toast', 'element', 'text', 'title', 'api']);\n\n/**\n * Element state enum for completion signals\n */\nexport const ElementStateSchema = z.enum(['visible', 'hidden', 'attached', 'detached']);\n\n/**\n * Completion signal schema\n */\nexport const CompletionSignalSchema = z.object({\n  type: CompletionTypeSchema,\n  value: z.string().min(1, 'Completion signal value is required'),\n  options: z.object({\n    timeout: z.number().positive().optional(),\n    exact: z.boolean().optional(),\n    state: ElementStateSchema.optional(),\n    method: z.string().optional(),\n    status: z.number().int().positive().optional(),\n  }).optional(),\n});\n\n/**\n * Data configuration schema\n */\nexport const DataConfigSchema = z.object({\n  strategy: DataStrategySchema.default('create'),\n  cleanup: CleanupStrategySchema.default('best-effort'),\n});\n\n/**\n * Module dependencies schema\n */\nexport const ModulesSchema = z.object({\n  foundation: z.array(z.string()).default([]),\n  features: z.array(z.string()).default([]),\n});\n\n/**\n * Test reference schema\n */\nexport const TestRefSchema = z.object({\n  file: z.string(),\n  line: z.number().optional(),\n});\n\n/**\n * Link schema\n */\nexport const LinksSchema = z.object({\n  issues: z.array(z.string()).optional(),\n  prs: z.array(z.string()).optional(),\n  docs: z.array(z.string()).optional(),\n});\n\n/**\n * Negative path schema for error scenario testing\n */\nexport const NegativePathSchema = z.object({\n  name: z.string().min(1, 'Negative path name is required'),\n  input: z.record(z.any()),\n  expectedError: z.string().min(1, 'Expected error message is required'),\n  expectedElement: z.string().optional(),\n});\n\n/**\n * Visual regression configuration schema\n */\nexport const VisualRegressionSchema = z.object({\n  enabled: z.boolean(),\n  snapshots: z.array(z.string()).optional(),\n  threshold: z.number().min(0).max(1).optional(),\n});\n\n/**\n * Accessibility timing mode enum\n */\nexport const AccessibilityTimingSchema = z.enum(['afterEach', 'inTest']);\n\n/**\n * Accessibility configuration schema\n */\nexport const AccessibilitySchema = z.object({\n  enabled: z.boolean(),\n  rules: z.array(z.string()).optional(),\n  exclude: z.array(z.string()).optional(),\n  /**\n   * When to run accessibility checks:\n   * - 'afterEach': Run after each test (default, catches issues but doesn't fail individual tests)\n   * - 'inTest': Run within test steps (fails immediately, better for CI)\n   */\n  timing: AccessibilityTimingSchema.default('afterEach'),\n});\n\n/**\n * Performance budgets schema\n */\nexport const PerformanceSchema = z.object({\n  enabled: z.boolean(),\n  budgets: z\n    .object({\n      lcp: z.number().positive().optional(),\n      fid: z.number().positive().optional(),\n      cls: z.number().min(0).optional(),\n      ttfb: z.number().positive().optional(),\n    })\n    .optional(),\n  /** Timeout for collecting performance metrics in ms (default: 3000) */\n  collectTimeout: z.number().positive().optional(),\n});\n\n/**\n * Test data set schema for parameterized/data-driven tests\n */\nexport const TestDataSetSchema = z.object({\n  name: z.string().min(1, 'Test data set name is required'),\n  description: z.string().optional(),\n  data: z.record(z.string(), z.any()),\n});\n\n/**\n * Complete Journey frontmatter schema\n */\nexport const JourneyFrontmatterSchema = z.object({\n  id: z\n    .string()\n    .regex(/^JRN-\\d{4}$/, 'Journey ID must be in format JRN-XXXX'),\n  title: z.string().min(1, 'Title is required'),\n  status: JourneyStatusSchema,\n  tier: JourneyTierSchema,\n  scope: z.string().min(1, 'Scope is required'),\n  actor: z.string().min(1, 'Actor is required'),\n  revision: z.number().int().positive().default(1),\n  owner: z.string().optional(),\n  statusReason: z.string().optional(),\n  modules: ModulesSchema.default({ foundation: [], features: [] }),\n  tests: z.array(z.union([z.string(), TestRefSchema])).default([]),\n  data: DataConfigSchema.optional(),\n  completion: z.array(CompletionSignalSchema).optional(),\n  links: LinksSchema.optional(),\n  tags: z.array(z.string()).optional(),\n  flags: z\n    .object({\n      required: z.array(z.string()).optional(),\n      forbidden: z.array(z.string()).optional(),\n    })\n    .optional(),\n  prerequisites: z\n    .array(z.string())\n    .optional()\n    .describe('Array of Journey IDs that must run first'),\n  negativePaths: z\n    .array(NegativePathSchema)\n    .optional()\n    .describe('Error scenarios to test'),\n  testData: z\n    .array(TestDataSetSchema)\n    .optional()\n    .describe('Parameterized test data sets for data-driven testing'),\n  visualRegression: VisualRegressionSchema.optional(),\n  accessibility: AccessibilitySchema.optional(),\n  performance: PerformanceSchema.optional(),\n});\n\n/**\n * Schema specifically for clarified journeys (required for AutoGen)\n */\nexport const ClarifiedJourneyFrontmatterSchema = JourneyFrontmatterSchema.extend({\n  status: z.literal('clarified'),\n}).refine(\n  (data) => {\n    // Clarified journeys should have completion signals\n    return data.completion && data.completion.length > 0;\n  },\n  {\n    message: 'Clarified journeys must have at least one completion signal',\n    path: ['completion'],\n  }\n);\n\n/**\n * Schema for implemented journeys (must have tests)\n */\nexport const ImplementedJourneyFrontmatterSchema = JourneyFrontmatterSchema.extend({\n  status: z.literal('implemented'),\n}).refine(\n  (data) => {\n    return data.tests && data.tests.length > 0;\n  },\n  {\n    message: 'Implemented journeys must have at least one test reference',\n    path: ['tests'],\n  }\n);\n\n/**\n * Schema for quarantined journeys (must have owner and reason)\n */\nexport const QuarantinedJourneyFrontmatterSchema = JourneyFrontmatterSchema.extend({\n  status: z.literal('quarantined'),\n  owner: z.string().min(1, 'Quarantined journeys require an owner'),\n  statusReason: z.string().min(1, 'Quarantined journeys require a status reason'),\n}).refine(\n  (data) => {\n    return data.links?.issues && data.links.issues.length > 0;\n  },\n  {\n    message: 'Quarantined journeys must have at least one linked issue',\n    path: ['links', 'issues'],\n  }\n);\n\n/**\n * TypeScript types\n */\nexport type JourneyStatus = z.infer<typeof JourneyStatusSchema>;\nexport type JourneyTier = z.infer<typeof JourneyTierSchema>;\nexport type DataStrategy = z.infer<typeof DataStrategySchema>;\nexport type CleanupStrategy = z.infer<typeof CleanupStrategySchema>;\nexport type CompletionType = z.infer<typeof CompletionTypeSchema>;\nexport type CompletionSignal = z.infer<typeof CompletionSignalSchema>;\nexport type DataConfig = z.infer<typeof DataConfigSchema>;\nexport type Modules = z.infer<typeof ModulesSchema>;\nexport type TestRef = z.infer<typeof TestRefSchema>;\nexport type Links = z.infer<typeof LinksSchema>;\nexport type NegativePath = z.infer<typeof NegativePathSchema>;\nexport type TestDataSet = z.infer<typeof TestDataSetSchema>;\nexport type VisualRegression = z.infer<typeof VisualRegressionSchema>;\nexport type Accessibility = z.infer<typeof AccessibilitySchema>;\nexport type Performance = z.infer<typeof PerformanceSchema>;\nexport type JourneyFrontmatter = z.infer<typeof JourneyFrontmatterSchema>;\n\n/**\n * Validate that a journey is ready for AutoGen (must be clarified)\n */\nexport function validateForAutoGen(\n  frontmatter: JourneyFrontmatter\n): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n\n  if (frontmatter.status !== 'clarified') {\n    errors.push(\n      `Journey status must be \"clarified\" for AutoGen, got \"${frontmatter.status}\"`\n    );\n  }\n\n  if (!frontmatter.completion || frontmatter.completion.length === 0) {\n    errors.push('Journey must have completion signals defined');\n  }\n\n  if (!frontmatter.actor) {\n    errors.push('Journey must have an actor defined');\n  }\n\n  if (!frontmatter.scope) {\n    errors.push('Journey must have a scope defined');\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors,\n  };\n}\n","/**\n * Journey Schema Validation - Validate Journey frontmatter before code generation\n * @see T039 - Journey schema validation (status=clarified check)\n */\nimport type { JourneyFrontmatter } from '../journey/parseJourney.js';\nimport { JourneyFrontmatterSchema, JourneyStatus } from '../journey/parseJourney.js';\n\n/**\n * Validation issue severity\n */\nexport type ValidationSeverity = 'error' | 'warning' | 'info';\n\n/**\n * A single validation issue\n */\nexport interface ValidationIssue {\n  /** Unique code for the issue */\n  code: string;\n  /** Human-readable message */\n  message: string;\n  /** Severity level */\n  severity: ValidationSeverity;\n  /** Field that has the issue, if applicable */\n  field?: string;\n  /** Suggested fix, if available */\n  suggestion?: string;\n}\n\n/**\n * Result of journey validation\n */\nexport interface JourneyValidationResult {\n  /** Whether the journey is valid for code generation */\n  valid: boolean;\n  /** Journey ID from frontmatter */\n  journeyId: string;\n  /** List of validation issues */\n  issues: ValidationIssue[];\n  /** Counts by severity */\n  counts: {\n    errors: number;\n    warnings: number;\n    info: number;\n  };\n}\n\n/**\n * Options for journey validation\n */\nexport interface JourneyValidationOptions {\n  /** Whether to allow draft journeys (status other than clarified) */\n  allowDrafts?: boolean;\n  /** Required tags that must be present */\n  requiredTags?: string[];\n  /** Valid tiers */\n  validTiers?: string[];\n  /** Warn if journey has no acceptance criteria */\n  warnEmptyAC?: boolean;\n}\n\nconst DEFAULT_OPTIONS: JourneyValidationOptions = {\n  allowDrafts: false,\n  requiredTags: [],\n  validTiers: ['smoke', 'release', 'regression'],\n  warnEmptyAC: true,\n};\n\n/**\n * Validate journey frontmatter schema\n */\nexport function validateJourneySchema(\n  frontmatter: unknown\n): { valid: boolean; issues: ValidationIssue[] } {\n  const result = JourneyFrontmatterSchema.safeParse(frontmatter);\n  const issues: ValidationIssue[] = [];\n\n  if (!result.success) {\n    for (const error of result.error.errors) {\n      issues.push({\n        code: 'SCHEMA_INVALID',\n        message: `${error.path.join('.')}: ${error.message}`,\n        severity: 'error',\n        field: error.path.join('.'),\n      });\n    }\n  }\n\n  return { valid: result.success, issues };\n}\n\n/**\n * Validate journey status is appropriate for code generation\n */\nexport function validateJourneyStatus(\n  status: JourneyStatus,\n  options: JourneyValidationOptions = {}\n): ValidationIssue[] {\n  const { allowDrafts = false } = options;\n  const issues: ValidationIssue[] = [];\n\n  // Code generation requires 'clarified' status\n  const validStatuses: JourneyStatus[] = ['clarified', 'implemented'];\n\n  if (!validStatuses.includes(status)) {\n    if (allowDrafts) {\n      issues.push({\n        code: 'STATUS_NOT_READY',\n        message: `Journey status is '${status}', ideally should be 'clarified' for code generation`,\n        severity: 'warning',\n        field: 'status',\n        suggestion: 'Run /journey-clarify to add execution details',\n      });\n    } else {\n      issues.push({\n        code: 'STATUS_NOT_CLARIFIED',\n        message: `Journey status is '${status}', must be 'clarified' for code generation`,\n        severity: 'error',\n        field: 'status',\n        suggestion: 'Run /journey-clarify to add execution details',\n      });\n    }\n  }\n\n  // Warn about quarantined or deprecated\n  if (status === 'quarantined') {\n    issues.push({\n      code: 'STATUS_QUARANTINED',\n      message: 'Journey is quarantined - tests are disabled',\n      severity: 'warning',\n      field: 'status',\n    });\n  }\n\n  if (status === 'deprecated') {\n    issues.push({\n      code: 'STATUS_DEPRECATED',\n      message: 'Journey is deprecated - consider removing',\n      severity: 'warning',\n      field: 'status',\n    });\n  }\n\n  return issues;\n}\n\n/**\n * Validate journey tier is valid\n */\nexport function validateJourneyTier(\n  tier: string,\n  options: JourneyValidationOptions = {}\n): ValidationIssue[] {\n  const { validTiers = ['smoke', 'release', 'regression'] } = options;\n  const issues: ValidationIssue[] = [];\n\n  if (!validTiers.includes(tier)) {\n    issues.push({\n      code: 'TIER_INVALID',\n      message: `Invalid tier '${tier}', expected one of: ${validTiers.join(', ')}`,\n      severity: 'error',\n      field: 'tier',\n    });\n  }\n\n  return issues;\n}\n\n/**\n * Validate journey has required tags\n */\nexport function validateJourneyTags(\n  tags: string[],\n  journeyId: string,\n  options: JourneyValidationOptions = {}\n): ValidationIssue[] {\n  const { requiredTags = [] } = options;\n  const issues: ValidationIssue[] = [];\n\n  // Check for journey ID tag\n  const idTag = `@${journeyId}`;\n  if (!tags.includes(idTag)) {\n    issues.push({\n      code: 'TAG_MISSING_ID',\n      message: `Journey should have ID tag '${idTag}'`,\n      severity: 'warning',\n      field: 'tags',\n      suggestion: `Add '${idTag}' to tags array`,\n    });\n  }\n\n  // Check for required tags\n  for (const requiredTag of requiredTags) {\n    if (!tags.includes(requiredTag)) {\n      issues.push({\n        code: 'TAG_MISSING_REQUIRED',\n        message: `Missing required tag '${requiredTag}'`,\n        severity: 'error',\n        field: 'tags',\n        suggestion: `Add '${requiredTag}' to tags array`,\n      });\n    }\n  }\n\n  return issues;\n}\n\n/**\n * Validate journey frontmatter for code generation\n */\nexport function validateJourneyFrontmatter(\n  frontmatter: JourneyFrontmatter,\n  options: JourneyValidationOptions = {}\n): JourneyValidationResult {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n  const issues: ValidationIssue[] = [];\n\n  // Schema validation\n  const schemaResult = validateJourneySchema(frontmatter);\n  issues.push(...schemaResult.issues);\n\n  // Status validation\n  issues.push(...validateJourneyStatus(frontmatter.status, opts));\n\n  // Tier validation\n  issues.push(...validateJourneyTier(frontmatter.tier, opts));\n\n  // Tags validation\n  issues.push(...validateJourneyTags(frontmatter.tags || [], frontmatter.id, opts));\n\n  // Check for actor\n  if (!frontmatter.actor) {\n    issues.push({\n      code: 'ACTOR_MISSING',\n      message: 'Journey should specify an actor (user role)',\n      severity: 'warning',\n      field: 'actor',\n    });\n  }\n\n  // Check for scope\n  if (!frontmatter.scope) {\n    issues.push({\n      code: 'SCOPE_MISSING',\n      message: 'Journey should specify a scope (feature area)',\n      severity: 'warning',\n      field: 'scope',\n    });\n  }\n\n  // Calculate counts\n  const counts = {\n    errors: issues.filter((i) => i.severity === 'error').length,\n    warnings: issues.filter((i) => i.severity === 'warning').length,\n    info: issues.filter((i) => i.severity === 'info').length,\n  };\n\n  return {\n    valid: counts.errors === 0,\n    journeyId: frontmatter.id,\n    issues,\n    counts,\n  };\n}\n\n/**\n * Quick check if journey is ready for code generation\n */\nexport function isJourneyReady(frontmatter: JourneyFrontmatter): boolean {\n  const result = validateJourneyFrontmatter(frontmatter, { allowDrafts: false });\n  return result.valid;\n}\n","/**\n * Forbidden Pattern Scanner - Detect anti-patterns in generated test code\n * @see T040 - Forbidden pattern scanner (waitForTimeout, force:true, etc.)\n */\nimport type { ValidationIssue, ValidationSeverity } from './journey.js';\n\n/**\n * A forbidden pattern definition\n */\nexport interface ForbiddenPattern {\n  /** Unique identifier */\n  id: string;\n  /** Pattern name */\n  name: string;\n  /** Regex to match the pattern */\n  regex: RegExp;\n  /** Severity of the issue */\n  severity: ValidationSeverity;\n  /** Why this pattern is forbidden */\n  reason: string;\n  /** Suggested alternative */\n  suggestion: string;\n  /** Whether to allow in specific contexts (e.g., setup/cleanup) */\n  allowedContexts?: string[];\n}\n\n/**\n * Result of pattern scanning\n */\nexport interface PatternScanResult {\n  /** Line number (1-based) */\n  line: number;\n  /** Column number (1-based) */\n  column: number;\n  /** The matched text */\n  match: string;\n  /** The full line content */\n  lineContent: string;\n  /** The pattern that was violated */\n  pattern: ForbiddenPattern;\n}\n\n/**\n * Forbidden patterns that indicate flaky or brittle tests\n */\nexport const FORBIDDEN_PATTERNS: ForbiddenPattern[] = [\n  {\n    id: 'WAIT_TIMEOUT',\n    name: 'waitForTimeout',\n    regex: /\\bpage\\.waitForTimeout\\s*\\(\\s*\\d+\\s*\\)/g,\n    severity: 'error',\n    reason: 'Hard-coded waits cause flakiness and slow down tests',\n    suggestion: 'Use waitForSelector, waitForLoadState, or assertion auto-wait',\n  },\n  {\n    id: 'WAIT_ARBITRARY',\n    name: 'arbitrary-wait',\n    regex: /\\bawait\\s+new\\s+Promise\\s*\\(\\s*(?:resolve|r)\\s*=>\\s*setTimeout/g,\n    severity: 'error',\n    reason: 'Custom setTimeout-based waits cause flakiness',\n    suggestion: 'Use Playwright auto-wait assertions instead',\n  },\n  {\n    id: 'FORCE_CLICK',\n    name: 'force-click',\n    regex: /\\.click\\s*\\([^)]*\\{\\s*force\\s*:\\s*true/g,\n    severity: 'warning',\n    reason: 'Force clicking bypasses visibility checks and masks issues',\n    suggestion: 'Ensure element is visible and actionable, or use scrollIntoView',\n  },\n  {\n    id: 'FORCE_FILL',\n    name: 'force-fill',\n    regex: /\\.fill\\s*\\(\\s*[^,]+,\\s*\\{\\s*force\\s*:\\s*true/g,\n    severity: 'warning',\n    reason: 'Force filling bypasses visibility checks',\n    suggestion: 'Ensure input is visible and enabled',\n  },\n  {\n    id: 'CSS_SELECTOR_CLASS',\n    name: 'css-class-selector',\n    regex: /(?:page|locator)\\s*\\.\\s*(?:locator|querySelector)\\s*\\(\\s*['\"][^'\"]*\\.[a-z][a-z0-9_-]*(?:\\s|['\">\\[])/gi,\n    severity: 'warning',\n    reason: 'CSS class selectors are fragile and may change',\n    suggestion: 'Use role, label, placeholder, text, or testid locators',\n  },\n  {\n    id: 'CSS_SELECTOR_TAG',\n    name: 'css-tag-selector',\n    regex: /(?:page|locator)\\s*\\.\\s*locator\\s*\\(\\s*['\"](?:div|span|p|h[1-6]|section|header|footer|main|nav|aside|article)(?:\\s*>|\\s*\\[|['\"])/gi,\n    severity: 'warning',\n    reason: 'Generic tag selectors are too broad and fragile',\n    suggestion: 'Use more specific selectors like role, label, or testid',\n  },\n  {\n    id: 'XPATH_SELECTOR',\n    name: 'xpath-selector',\n    regex: /(?:page|locator)\\s*\\.\\s*locator\\s*\\(\\s*['\"]\\/\\/[^'\"]+['\"]/g,\n    severity: 'warning',\n    reason: 'XPath selectors are verbose and often fragile',\n    suggestion: 'Use role, label, or testid locators instead',\n  },\n  {\n    id: 'NTH_CHILD',\n    name: 'nth-child-selector',\n    regex: /:nth-child\\s*\\(\\s*\\d+\\s*\\)/g,\n    severity: 'warning',\n    reason: 'nth-child selectors break when DOM order changes',\n    suggestion: 'Use unique identifiers like testid or text content',\n  },\n  {\n    id: 'INDEX_LOCATOR',\n    name: 'index-based-locator',\n    regex: /\\.(?:first|last|nth)\\s*\\(\\s*(?:\\d+)?\\s*\\)/g,\n    severity: 'info',\n    reason: 'Index-based locators may break when list order changes',\n    suggestion: 'Consider filtering by unique content or attributes',\n  },\n  {\n    id: 'HARDCODED_URL',\n    name: 'hardcoded-url',\n    regex: /\\bpage\\.goto\\s*\\(\\s*['\"]https?:\\/\\/[^'\"]+['\"]/g,\n    severity: 'warning',\n    reason: 'Hardcoded URLs make tests environment-specific',\n    suggestion: 'Use baseURL from config or relative paths',\n  },\n  {\n    id: 'HARDCODED_CREDENTIALS',\n    name: 'hardcoded-credentials',\n    regex: /(?:password|secret|apikey|api_key|token)\\s*[=:]\\s*['\"][^'\"]+['\"]/gi,\n    severity: 'error',\n    reason: 'Credentials should not be hardcoded in test files',\n    suggestion: 'Use environment variables or secure config',\n  },\n  {\n    id: 'CONSOLE_LOG',\n    name: 'console-log',\n    regex: /\\bconsole\\.(log|info|warn|error)\\s*\\(/g,\n    severity: 'info',\n    reason: 'Console statements should be removed from production tests',\n    suggestion: 'Use test reporter or remove debug statements',\n  },\n  {\n    id: 'MISSING_AWAIT',\n    name: 'missing-await-locator',\n    regex: /(?<!await\\s+)page\\.(?:click|fill|type|check|uncheck|selectOption|press|hover|focus)\\s*\\(/g,\n    severity: 'error',\n    reason: 'Playwright actions must be awaited',\n    suggestion: 'Add await before the action',\n  },\n  {\n    id: 'SKIP_TEST',\n    name: 'test-skip',\n    regex: /\\btest\\.skip\\s*\\(/g,\n    severity: 'info',\n    reason: 'Skipped tests may be forgotten',\n    suggestion: 'Remove skip or convert to fixme with issue link',\n  },\n  {\n    id: 'TEST_ONLY',\n    name: 'test-only',\n    regex: /\\btest\\.only\\s*\\(/g,\n    severity: 'error',\n    reason: 'test.only excludes all other tests',\n    suggestion: 'Remove .only before committing',\n  },\n  {\n    id: 'ELEMENT_HANDLE',\n    name: 'element-handle',\n    regex: /\\.\\$\\s*\\(|\\.\\$\\$\\s*\\(/g,\n    severity: 'warning',\n    reason: 'ElementHandle is deprecated, use locators instead',\n    suggestion: 'Use page.locator() instead of page.$() or page.$$()',\n  },\n  {\n    id: 'EVAL_SELECTOR',\n    name: 'eval-selector',\n    regex: /\\.\\$eval\\s*\\(|\\.\\$\\$eval\\s*\\(/g,\n    severity: 'warning',\n    reason: 'eval methods are fragile and hard to debug',\n    suggestion: 'Use locator methods like textContent(), getAttribute()',\n  },\n  {\n    id: 'SLEEP_IMPORT',\n    name: 'sleep-import',\n    regex: /import\\s*\\{[^}]*sleep[^}]*\\}|require\\s*\\(['\"'][^'\"]*sleep/gi,\n    severity: 'warning',\n    reason: 'Sleep utilities encourage flaky tests',\n    suggestion: 'Use Playwright auto-wait mechanisms',\n  },\n];\n\n/**\n * Scan code for forbidden patterns\n */\nexport function scanForbiddenPatterns(\n  code: string,\n  patterns: ForbiddenPattern[] = FORBIDDEN_PATTERNS\n): PatternScanResult[] {\n  const results: PatternScanResult[] = [];\n  const lines = code.split('\\n');\n\n  for (const pattern of patterns) {\n    // Reset regex state for global patterns\n    pattern.regex.lastIndex = 0;\n\n    for (let lineIndex = 0; lineIndex < lines.length; lineIndex++) {\n      const line = lines[lineIndex]!;\n      let match: RegExpExecArray | null;\n\n      // Clone regex to avoid state issues with global flag\n      const regex = new RegExp(pattern.regex.source, pattern.regex.flags);\n\n      while ((match = regex.exec(line)) !== null) {\n        results.push({\n          line: lineIndex + 1,\n          column: match.index + 1,\n          match: match[0]!,\n          lineContent: line!.trim(),\n          pattern,\n        });\n\n        // Prevent infinite loop for zero-length matches\n        if (match.index === regex.lastIndex) {\n          regex.lastIndex++;\n        }\n      }\n    }\n  }\n\n  // Sort by line number, then column\n  results.sort((a, b) => a.line - b.line || a.column - b.column);\n\n  return results;\n}\n\n/**\n * Convert scan results to validation issues\n */\nexport function scanResultsToIssues(results: PatternScanResult[]): ValidationIssue[] {\n  return results.map((result) => ({\n    code: result.pattern.id,\n    message: `Line ${result.line}: ${result.pattern.name} - ${result.pattern.reason}`,\n    severity: result.pattern.severity,\n    suggestion: result.pattern.suggestion,\n  }));\n}\n\n/**\n * Get pattern statistics\n */\nexport function getPatternStats(\n  results: PatternScanResult[]\n): Record<string, number> {\n  const stats: Record<string, number> = {};\n\n  for (const result of results) {\n    stats[result.pattern.id] = (stats[result.pattern.id] || 0) + 1;\n  }\n\n  return stats;\n}\n\n/**\n * Check if code has any error-level violations\n */\nexport function hasErrorViolations(results: PatternScanResult[]): boolean {\n  return results.some((r) => r.pattern.severity === 'error');\n}\n\n/**\n * Filter results by severity\n */\nexport function filterBySeverity(\n  results: PatternScanResult[],\n  severity: ValidationSeverity\n): PatternScanResult[] {\n  return results.filter((r) => r.pattern.severity === severity);\n}\n\n/**\n * Get a summary of violations by category\n */\nexport function getViolationSummary(results: PatternScanResult[]): {\n  total: number;\n  errors: number;\n  warnings: number;\n  info: number;\n  byPattern: Record<string, number>;\n} {\n  return {\n    total: results.length,\n    errors: filterBySeverity(results, 'error').length,\n    warnings: filterBySeverity(results, 'warning').length,\n    info: filterBySeverity(results, 'info').length,\n    byPattern: getPatternStats(results),\n  };\n}\n","/**\n * ESLint Integration - Run ESLint with Playwright plugin rules\n * @see T041 - ESLint integration with eslint-plugin-playwright\n */\nimport { execSync } from 'node:child_process';\nimport { existsSync, writeFileSync, unlinkSync, mkdirSync } from 'node:fs';\nimport { join, dirname } from 'node:path';\nimport { tmpdir } from 'node:os';\nimport type { ValidationIssue, ValidationSeverity } from './journey.js';\n\n/**\n * ESLint message from JSON output\n */\ninterface ESLintMessage {\n  ruleId: string | null;\n  severity: 1 | 2; // 1 = warning, 2 = error\n  message: string;\n  line: number;\n  column: number;\n  endLine?: number;\n  endColumn?: number;\n  fix?: {\n    range: [number, number];\n    text: string;\n  };\n}\n\n/**\n * ESLint file result from JSON output\n */\ninterface ESLintFileResult {\n  filePath: string;\n  messages: ESLintMessage[];\n  errorCount: number;\n  warningCount: number;\n  fixableErrorCount: number;\n  fixableWarningCount: number;\n  source?: string;\n}\n\n/**\n * Result of linting code\n */\nexport interface LintResult {\n  /** Whether linting passed (no errors) */\n  passed: boolean;\n  /** ESLint output */\n  output: string;\n  /** Parsed issues */\n  issues: ValidationIssue[];\n  /** Error count */\n  errorCount: number;\n  /** Warning count */\n  warningCount: number;\n}\n\n/**\n * Options for ESLint\n */\nexport interface LintOptions {\n  /** Additional ESLint rules to enable */\n  rules?: Record<string, unknown>;\n  /** Whether to fix auto-fixable issues */\n  fix?: boolean;\n  /** Custom ESLint config path */\n  configPath?: string;\n  /** Working directory */\n  cwd?: string;\n}\n\n/**\n * Default Playwright ESLint rules\n */\nexport const PLAYWRIGHT_LINT_RULES: Record<string, unknown> = {\n  // Playwright plugin rules\n  'playwright/missing-playwright-await': 'error',\n  'playwright/no-conditional-in-test': 'warn',\n  'playwright/no-element-handle': 'error',\n  'playwright/no-eval': 'error',\n  'playwright/no-focused-test': 'error',\n  'playwright/no-force-option': 'warn',\n  'playwright/no-nested-step': 'warn',\n  'playwright/no-networkidle': 'warn',\n  'playwright/no-page-pause': 'error',\n  'playwright/no-skipped-test': 'warn',\n  'playwright/no-useless-await': 'warn',\n  'playwright/no-useless-not': 'warn',\n  'playwright/no-wait-for-timeout': 'error',\n  'playwright/prefer-lowercase-title': 'off',\n  'playwright/prefer-strict-equal': 'warn',\n  'playwright/prefer-to-be': 'warn',\n  'playwright/prefer-to-contain': 'warn',\n  'playwright/prefer-to-have-count': 'warn',\n  'playwright/prefer-to-have-length': 'warn',\n  'playwright/prefer-web-first-assertions': 'error',\n  'playwright/require-soft-assertions': 'off',\n  'playwright/valid-describe-callback': 'error',\n  'playwright/valid-expect': 'error',\n  'playwright/valid-expect-in-promise': 'error',\n  'playwright/valid-title': 'warn',\n};\n\n/**\n * Generate ESLint flat config for Playwright tests\n */\nexport function generateESLintConfig(\n  rules: Record<string, unknown> = PLAYWRIGHT_LINT_RULES\n): string {\n  return `import playwright from 'eslint-plugin-playwright';\n\nexport default [\n  {\n    files: ['**/*.spec.ts', '**/*.test.ts'],\n    plugins: {\n      playwright,\n    },\n    rules: ${JSON.stringify(rules, null, 2)},\n  },\n];\n`;\n}\n\n/**\n * Check if ESLint and Playwright plugin are available\n */\nexport function isESLintAvailable(cwd?: string): boolean {\n  try {\n    execSync('npx eslint --version', {\n      cwd,\n      stdio: 'pipe',\n      encoding: 'utf-8',\n    });\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Check if eslint-plugin-playwright is installed\n */\nexport function isPlaywrightPluginAvailable(cwd?: string): boolean {\n  try {\n    const result = execSync('npm list eslint-plugin-playwright', {\n      cwd,\n      stdio: 'pipe',\n      encoding: 'utf-8',\n    });\n    return result.includes('eslint-plugin-playwright');\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Convert ESLint severity to ValidationSeverity\n */\nfunction convertSeverity(eslintSeverity: 1 | 2): ValidationSeverity {\n  return eslintSeverity === 2 ? 'error' : 'warning';\n}\n\n/**\n * Parse ESLint JSON output to validation issues\n */\nexport function parseESLintOutput(output: string): ValidationIssue[] {\n  try {\n    const results: ESLintFileResult[] = JSON.parse(output);\n    const issues: ValidationIssue[] = [];\n\n    for (const file of results) {\n      for (const msg of file.messages) {\n        issues.push({\n          code: msg.ruleId || 'ESLINT_ERROR',\n          message: `Line ${msg.line}:${msg.column} - ${msg.message}`,\n          severity: convertSeverity(msg.severity),\n          suggestion: msg.fix ? 'Auto-fixable with --fix' : undefined,\n        });\n      }\n    }\n\n    return issues;\n  } catch {\n    // If JSON parsing fails, return a single error\n    return [\n      {\n        code: 'ESLINT_PARSE_ERROR',\n        message: 'Failed to parse ESLint output',\n        severity: 'error',\n      },\n    ];\n  }\n}\n\n/**\n * Run ESLint on code string\n * Note: This creates a temporary file for linting\n */\nexport async function lintCode(\n  code: string,\n  filename: string = 'test.spec.ts',\n  options: LintOptions = {}\n): Promise<LintResult> {\n  const { cwd = process.cwd(), fix = false, configPath } = options;\n\n  // Check ESLint availability\n  if (!isESLintAvailable(cwd)) {\n    return {\n      passed: true,\n      output: 'ESLint not available - skipping lint check',\n      issues: [\n        {\n          code: 'ESLINT_NOT_AVAILABLE',\n          message: 'ESLint is not installed',\n          severity: 'info',\n          suggestion: 'Run npm install eslint eslint-plugin-playwright',\n        },\n      ],\n      errorCount: 0,\n      warningCount: 0,\n    };\n  }\n\n  // Create temp file for linting\n  const tempDir = join(tmpdir(), 'autogen-lint');\n  mkdirSync(tempDir, { recursive: true });\n  const tempFile = join(tempDir, filename);\n\n  try {\n    writeFileSync(tempFile, code, 'utf-8');\n\n    // Build ESLint command\n    const args = ['eslint', '--format', 'json'];\n\n    if (fix) {\n      args.push('--fix');\n    }\n\n    if (configPath && existsSync(configPath)) {\n      args.push('--config', configPath);\n    }\n\n    args.push(tempFile);\n\n    // Run ESLint\n    const result = execSync(`npx ${args.join(' ')}`, {\n      cwd,\n      stdio: 'pipe',\n      encoding: 'utf-8',\n    });\n\n    return {\n      passed: true,\n      output: result,\n      issues: parseESLintOutput(result),\n      errorCount: 0,\n      warningCount: 0,\n    };\n  } catch (err: unknown) {\n    // ESLint exits with non-zero on errors/warnings\n    const error = err as { stdout?: string; status?: number };\n    const output = error.stdout || '';\n\n    try {\n      const results: ESLintFileResult[] = JSON.parse(output);\n      const issues = parseESLintOutput(output);\n\n      let errorCount = 0;\n      let warningCount = 0;\n\n      for (const file of results) {\n        errorCount += file.errorCount;\n        warningCount += file.warningCount;\n      }\n\n      return {\n        passed: errorCount === 0,\n        output,\n        issues,\n        errorCount,\n        warningCount,\n      };\n    } catch {\n      return {\n        passed: false,\n        output: output || 'ESLint execution failed',\n        issues: [\n          {\n            code: 'ESLINT_EXECUTION_ERROR',\n            message: 'ESLint execution failed',\n            severity: 'error',\n          },\n        ],\n        errorCount: 1,\n        warningCount: 0,\n      };\n    }\n  } finally {\n    // Cleanup temp file\n    try {\n      unlinkSync(tempFile);\n    } catch {\n      // Ignore cleanup errors\n    }\n  }\n}\n\n/**\n * Lint a file directly\n */\nexport async function lintFile(\n  filePath: string,\n  options: LintOptions = {}\n): Promise<LintResult> {\n  const { cwd = dirname(filePath), fix = false, configPath } = options;\n\n  if (!existsSync(filePath)) {\n    return {\n      passed: false,\n      output: `File not found: ${filePath}`,\n      issues: [\n        {\n          code: 'FILE_NOT_FOUND',\n          message: `File not found: ${filePath}`,\n          severity: 'error',\n        },\n      ],\n      errorCount: 1,\n      warningCount: 0,\n    };\n  }\n\n  // Check ESLint availability\n  if (!isESLintAvailable(cwd)) {\n    return {\n      passed: true,\n      output: 'ESLint not available - skipping lint check',\n      issues: [],\n      errorCount: 0,\n      warningCount: 0,\n    };\n  }\n\n  try {\n    const args = ['eslint', '--format', 'json'];\n\n    if (fix) {\n      args.push('--fix');\n    }\n\n    if (configPath && existsSync(configPath)) {\n      args.push('--config', configPath);\n    }\n\n    args.push(filePath);\n\n    const result = execSync(`npx ${args.join(' ')}`, {\n      cwd,\n      stdio: 'pipe',\n      encoding: 'utf-8',\n    });\n\n    return {\n      passed: true,\n      output: result,\n      issues: parseESLintOutput(result),\n      errorCount: 0,\n      warningCount: 0,\n    };\n  } catch (err: unknown) {\n    const error = err as { stdout?: string };\n    const output = error.stdout || '';\n    const issues = parseESLintOutput(output);\n\n    return {\n      passed: issues.filter((i) => i.severity === 'error').length === 0,\n      output,\n      issues,\n      errorCount: issues.filter((i) => i.severity === 'error').length,\n      warningCount: issues.filter((i) => i.severity === 'warning').length,\n    };\n  }\n}\n\n/**\n * Quick check if code has lint errors (without full details)\n */\nexport function hasLintErrors(code: string): boolean {\n  // Simple heuristic check for common errors without running ESLint\n  const patterns = [\n    /test\\.only\\s*\\(/g,\n    /\\.waitForTimeout\\s*\\(/g,\n    /page\\.pause\\s*\\(/g,\n  ];\n\n  for (const pattern of patterns) {\n    if (pattern.test(code)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","/**\n * Tag Validation - Ensure generated tests have correct Playwright tags\n * @see T042 - Tag validation (required @JRN-####, @tier-*, @scope-*)\n */\nimport type { ValidationIssue } from './journey.js';\n\n/**\n * Tag pattern matchers\n */\nexport const TAG_PATTERNS = {\n  journeyId: /^@JRN-\\d{4}$/,\n  tier: /^@tier-(smoke|release|regression)$/,\n  scope: /^@scope-[a-z][a-z0-9-]*$/,\n  actor: /^@actor-[a-z][a-z0-9-]*$/,\n  custom: /^@[a-z][a-z0-9-]*$/,\n};\n\n/**\n * Tag validation options\n */\nexport interface TagValidationOptions {\n  /** Whether journey ID tag is required */\n  requireJourneyId?: boolean;\n  /** Whether tier tag is required */\n  requireTier?: boolean;\n  /** Whether scope tag is required */\n  requireScope?: boolean;\n  /** Whether actor tag is required */\n  requireActor?: boolean;\n  /** Additional required tags */\n  requiredTags?: string[];\n  /** Forbidden tags */\n  forbiddenTags?: string[];\n  /** Maximum number of tags */\n  maxTags?: number;\n}\n\nconst DEFAULT_OPTIONS: TagValidationOptions = {\n  requireJourneyId: true,\n  requireTier: true,\n  requireScope: true,\n  requireActor: false,\n  requiredTags: [],\n  forbiddenTags: [],\n  maxTags: 10,\n};\n\n/**\n * Tag validation result\n */\nexport interface TagValidationResult {\n  /** Whether tags are valid */\n  valid: boolean;\n  /** Validation issues */\n  issues: ValidationIssue[];\n  /** Parsed tags */\n  parsedTags: {\n    journeyId?: string;\n    tier?: string;\n    scope?: string;\n    actor?: string;\n    custom: string[];\n  };\n}\n\n/**\n * Parse tags from generated test code\n */\nexport function parseTagsFromCode(code: string): string[] {\n  // Match tag array in test.describe\n  const tagArrayMatch = code.match(/tag:\\s*\\[([^\\]]*)\\]/);\n  if (!tagArrayMatch) {\n    return [];\n  }\n\n  // Extract individual tags\n  const tagArrayContent = tagArrayMatch[1]!;\n  const tagMatches = tagArrayContent.match(/'[^']+'/g) || [];\n\n  return tagMatches.map((t) => t.replace(/'/g, ''));\n}\n\n/**\n * Parse tags from frontmatter tags array\n */\nexport function parseTagsFromFrontmatter(tags: string[]): string[] {\n  // Normalize tags - remove quotes if present\n  return tags.map((t) => {\n    const cleaned = t.replace(/^['\"]|['\"]$/g, '');\n    // Ensure @ prefix\n    return cleaned.startsWith('@') ? cleaned : `@${cleaned}`;\n  });\n}\n\n/**\n * Categorize tags by type\n */\nexport function categorizeTags(tags: string[]): {\n  journeyId?: string;\n  tier?: string;\n  scope?: string;\n  actor?: string;\n  custom: string[];\n} {\n  const result: {\n    journeyId?: string;\n    tier?: string;\n    scope?: string;\n    actor?: string;\n    custom: string[];\n  } = { custom: [] };\n\n  for (const tag of tags) {\n    if (TAG_PATTERNS.journeyId.test(tag)) {\n      result.journeyId = tag;\n    } else if (TAG_PATTERNS.tier.test(tag)) {\n      result.tier = tag;\n    } else if (TAG_PATTERNS.scope.test(tag)) {\n      result.scope = tag;\n    } else if (TAG_PATTERNS.actor.test(tag)) {\n      result.actor = tag;\n    } else if (TAG_PATTERNS.custom.test(tag)) {\n      result.custom.push(tag);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Validate tags against requirements\n */\nexport function validateTags(\n  tags: string[],\n  journeyId: string,\n  tier: string,\n  scope: string,\n  options: TagValidationOptions = {}\n): TagValidationResult {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n  const issues: ValidationIssue[] = [];\n  const parsedTags = categorizeTags(tags);\n\n  // Check journey ID tag\n  if (opts.requireJourneyId) {\n    const expectedIdTag = `@${journeyId}`;\n    if (!tags.includes(expectedIdTag) && parsedTags.journeyId !== expectedIdTag) {\n      issues.push({\n        code: 'TAG_MISSING_JOURNEY_ID',\n        message: `Missing journey ID tag '${expectedIdTag}'`,\n        severity: 'error',\n        field: 'tags',\n        suggestion: `Add '${expectedIdTag}' to the tags array`,\n      });\n    }\n  }\n\n  // Check tier tag\n  if (opts.requireTier) {\n    const expectedTierTag = `@tier-${tier}`;\n    if (!tags.includes(expectedTierTag) && parsedTags.tier !== expectedTierTag) {\n      // Check if any tier tag exists\n      if (!parsedTags.tier) {\n        issues.push({\n          code: 'TAG_MISSING_TIER',\n          message: `Missing tier tag, expected '${expectedTierTag}'`,\n          severity: 'warning',\n          field: 'tags',\n          suggestion: `Add '${expectedTierTag}' to the tags array`,\n        });\n      } else if (parsedTags.tier !== expectedTierTag) {\n        issues.push({\n          code: 'TAG_TIER_MISMATCH',\n          message: `Tier tag '${parsedTags.tier}' does not match journey tier '${tier}'`,\n          severity: 'warning',\n          field: 'tags',\n          suggestion: `Change to '${expectedTierTag}' or update journey tier`,\n        });\n      }\n    }\n  }\n\n  // Check scope tag\n  if (opts.requireScope) {\n    const expectedScopeTag = `@scope-${scope}`;\n    if (!tags.includes(expectedScopeTag) && parsedTags.scope !== expectedScopeTag) {\n      // Check if any scope tag exists\n      if (!parsedTags.scope) {\n        issues.push({\n          code: 'TAG_MISSING_SCOPE',\n          message: `Missing scope tag, expected '${expectedScopeTag}'`,\n          severity: 'warning',\n          field: 'tags',\n          suggestion: `Add '${expectedScopeTag}' to the tags array`,\n        });\n      } else if (parsedTags.scope !== expectedScopeTag) {\n        issues.push({\n          code: 'TAG_SCOPE_MISMATCH',\n          message: `Scope tag '${parsedTags.scope}' does not match journey scope '${scope}'`,\n          severity: 'warning',\n          field: 'tags',\n          suggestion: `Change to '${expectedScopeTag}' or update journey scope`,\n        });\n      }\n    }\n  }\n\n  // Check required custom tags\n  for (const requiredTag of opts.requiredTags || []) {\n    if (!tags.includes(requiredTag)) {\n      issues.push({\n        code: 'TAG_MISSING_REQUIRED',\n        message: `Missing required tag '${requiredTag}'`,\n        severity: 'error',\n        field: 'tags',\n        suggestion: `Add '${requiredTag}' to the tags array`,\n      });\n    }\n  }\n\n  // Check forbidden tags\n  for (const forbiddenTag of opts.forbiddenTags || []) {\n    if (tags.includes(forbiddenTag)) {\n      issues.push({\n        code: 'TAG_FORBIDDEN',\n        message: `Forbidden tag '${forbiddenTag}' should not be used`,\n        severity: 'error',\n        field: 'tags',\n        suggestion: `Remove '${forbiddenTag}' from the tags array`,\n      });\n    }\n  }\n\n  // Check max tags\n  if (opts.maxTags && tags.length > opts.maxTags) {\n    issues.push({\n      code: 'TAG_TOO_MANY',\n      message: `Too many tags (${tags.length}), maximum is ${opts.maxTags}`,\n      severity: 'warning',\n      field: 'tags',\n      suggestion: 'Remove unnecessary tags',\n    });\n  }\n\n  // Check for invalid tag format\n  for (const tag of tags) {\n    if (!TAG_PATTERNS.custom.test(tag)) {\n      issues.push({\n        code: 'TAG_INVALID_FORMAT',\n        message: `Invalid tag format '${tag}', tags should start with @ followed by lowercase letters`,\n        severity: 'warning',\n        field: 'tags',\n        suggestion: `Rename to a valid format like '@${tag.replace(/[^a-z0-9-]/gi, '-').toLowerCase()}'`,\n      });\n    }\n  }\n\n  // Check for duplicate tags\n  const duplicates = tags.filter((tag, index) => tags.indexOf(tag) !== index);\n  for (const duplicate of new Set(duplicates)) {\n    issues.push({\n      code: 'TAG_DUPLICATE',\n      message: `Duplicate tag '${duplicate}'`,\n      severity: 'warning',\n      field: 'tags',\n      suggestion: 'Remove duplicate tags',\n    });\n  }\n\n  return {\n    valid: issues.filter((i) => i.severity === 'error').length === 0,\n    issues,\n    parsedTags,\n  };\n}\n\n/**\n * Generate expected tags for a journey\n */\nexport function generateExpectedTags(\n  journeyId: string,\n  tier: string,\n  scope: string,\n  additionalTags: string[] = []\n): string[] {\n  return [\n    `@${journeyId}`,\n    `@tier-${tier}`,\n    `@scope-${scope}`,\n    ...additionalTags,\n  ];\n}\n\n/**\n * Validate tags in generated test code\n */\nexport function validateTagsInCode(\n  code: string,\n  journeyId: string,\n  tier: string,\n  scope: string,\n  options: TagValidationOptions = {}\n): TagValidationResult {\n  const tags = parseTagsFromCode(code);\n  return validateTags(tags, journeyId, tier, scope, options);\n}\n","/**\n * AC Coverage Validation - Check that all acceptance criteria have test steps\n * @see T043 - ACtest.step mapping completeness check\n */\nimport type { ValidationIssue } from './journey.js';\nimport type { AcceptanceCriterion } from '../journey/parseJourney.js';\nimport type { IRJourney, IRStep } from '../ir/types.js';\n\n/**\n * Coverage result for a single AC\n */\nexport interface ACCoverageResult {\n  /** AC identifier */\n  acId: string;\n  /** AC title */\n  acTitle: string;\n  /** Whether the AC has a corresponding test.step */\n  hasCoverage: boolean;\n  /** Number of mapped steps */\n  mappedSteps: number;\n  /** Number of blocked/unmapped steps */\n  blockedSteps: number;\n  /** Coverage percentage (mapped / total) */\n  coveragePercent: number;\n  /** List of unmapped step texts */\n  unmappedSteps: string[];\n}\n\n/**\n * Overall coverage result\n */\nexport interface CoverageResult {\n  /** Whether all ACs are covered */\n  fullCoverage: boolean;\n  /** Total number of ACs */\n  totalACs: number;\n  /** Number of covered ACs */\n  coveredACs: number;\n  /** Overall coverage percentage */\n  overallCoverage: number;\n  /** Coverage details per AC */\n  perAC: ACCoverageResult[];\n  /** Validation issues */\n  issues: ValidationIssue[];\n}\n\n/**\n * Coverage validation options\n */\nexport interface CoverageOptions {\n  /** Minimum coverage percentage required */\n  minCoverage?: number;\n  /** Warn on partial coverage */\n  warnPartialCoverage?: boolean;\n  /** Maximum allowed blocked steps per AC */\n  maxBlockedSteps?: number;\n}\n\nconst DEFAULT_OPTIONS: CoverageOptions = {\n  minCoverage: 80,\n  warnPartialCoverage: true,\n  maxBlockedSteps: 2,\n};\n\n/**\n * Find test.step calls in generated code\n */\nexport function findTestSteps(code: string): Array<{ id: string; description: string }> {\n  const steps: Array<{ id: string; description: string }> = [];\n\n  // Match test.step('ID: Description', async () => { ... })\n  const stepRegex = /test\\.step\\s*\\(\\s*['\"]([^:]+):\\s*([^'\"]+)['\"]/g;\n  let match;\n\n  while ((match = stepRegex.exec(code)) !== null) {\n    steps.push({\n      id: match[1]!.trim(),\n      description: match[2]!.trim(),\n    });\n  }\n\n  return steps;\n}\n\n/**\n * Find AC IDs mentioned in code comments\n */\nexport function findACReferences(code: string): string[] {\n  const references: string[] = [];\n\n  // Match AC-### in comments\n  const acRegex = /\\/\\/\\s*(AC-\\d+)|['\"]?(AC-\\d+)['\"]?/g;\n  let match;\n\n  while ((match = acRegex.exec(code)) !== null) {\n    const acId = match[1] || match[2];\n    if (acId && !references.includes(acId)) {\n      references.push(acId);\n    }\n  }\n\n  return references;\n}\n\n/**\n * Calculate coverage for an IR step\n */\nfunction calculateStepCoverage(step: IRStep): ACCoverageResult {\n  const totalSteps = step.actions.length + step.assertions.length;\n  const blockedSteps = step.actions.filter((a) => a.type === 'blocked').length;\n  const mappedSteps = totalSteps - blockedSteps;\n\n  const unmappedSteps: string[] = [];\n  for (const action of step.actions) {\n    if (action.type === 'blocked' && action.sourceText) {\n      unmappedSteps.push(action.sourceText);\n    }\n  }\n\n  return {\n    acId: step.id,\n    acTitle: step.description,\n    hasCoverage: mappedSteps > 0,\n    mappedSteps,\n    blockedSteps,\n    coveragePercent: totalSteps > 0 ? (mappedSteps / totalSteps) * 100 : 100,\n    unmappedSteps,\n  };\n}\n\n/**\n * Validate AC coverage in IR journey\n */\nexport function validateIRCoverage(\n  journey: IRJourney,\n  options: CoverageOptions = {}\n): CoverageResult {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n  const issues: ValidationIssue[] = [];\n  const perAC: ACCoverageResult[] = [];\n\n  // Calculate coverage for each step (which corresponds to an AC)\n  for (const step of journey.steps) {\n    const coverage = calculateStepCoverage(step);\n    perAC.push(coverage);\n\n    // Check coverage issues\n    if (!coverage.hasCoverage) {\n      issues.push({\n        code: 'AC_NO_COVERAGE',\n        message: `${step.id} has no mapped test steps`,\n        severity: 'error',\n        field: step.id,\n        suggestion: 'Clarify the AC steps or add supported patterns',\n      });\n    } else if (coverage.coveragePercent < (opts.minCoverage! || 80)) {\n      if (opts.warnPartialCoverage) {\n        issues.push({\n          code: 'AC_PARTIAL_COVERAGE',\n          message: `${step.id} has only ${Math.round(coverage.coveragePercent)}% coverage (${coverage.mappedSteps}/${coverage.mappedSteps + coverage.blockedSteps} steps)`,\n          severity: 'warning',\n          field: step.id,\n          suggestion: `Unmapped steps: ${coverage.unmappedSteps.join(', ')}`,\n        });\n      }\n    }\n\n    // Check blocked step count\n    if (opts.maxBlockedSteps! && coverage.blockedSteps > opts.maxBlockedSteps!) {\n      issues.push({\n        code: 'AC_TOO_MANY_BLOCKED',\n        message: `${step.id} has ${coverage.blockedSteps} blocked steps (max: ${opts.maxBlockedSteps})`,\n        severity: 'warning',\n        field: step.id,\n        suggestion: 'Consider clarifying these steps or marking the journey as needing manual implementation',\n      });\n    }\n  }\n\n  // Calculate overall stats\n  const totalACs = perAC.length;\n  const coveredACs = perAC.filter((ac) => ac.hasCoverage).length;\n  const overallCoverage = totalACs > 0 ? (coveredACs / totalACs) * 100 : 100;\n\n  // Overall coverage check\n  if (totalACs > 0 && overallCoverage < (opts.minCoverage || 80)) {\n    issues.push({\n      code: 'JOURNEY_LOW_COVERAGE',\n      message: `Journey has only ${Math.round(overallCoverage)}% AC coverage (${coveredACs}/${totalACs} ACs)`,\n      severity: overallCoverage < 50 ? 'error' : 'warning',\n      suggestion: 'Review and clarify uncovered acceptance criteria',\n    });\n  }\n\n  return {\n    fullCoverage: coveredACs === totalACs && issues.filter((i) => i.severity === 'error').length === 0,\n    totalACs,\n    coveredACs,\n    overallCoverage,\n    perAC,\n    issues,\n  };\n}\n\n/**\n * Validate coverage in generated test code\n */\nexport function validateCodeCoverage(\n  code: string,\n  acceptanceCriteria: AcceptanceCriterion[],\n  _options: CoverageOptions = {}\n): CoverageResult {\n  // Options reserved for future use (e.g., minCoverage threshold)\n  const issues: ValidationIssue[] = [];\n  const perAC: ACCoverageResult[] = [];\n\n  // Find test steps in code\n  const testSteps = findTestSteps(code);\n  const stepIds = testSteps.map((s) => s.id);\n\n  // Check each AC\n  for (const ac of acceptanceCriteria) {\n    const hasCoverage = stepIds.includes(ac.id);\n\n    perAC.push({\n      acId: ac.id,\n      acTitle: ac.title,\n      hasCoverage,\n      mappedSteps: hasCoverage ? ac.steps.length : 0,\n      blockedSteps: hasCoverage ? 0 : ac.steps.length,\n      coveragePercent: hasCoverage ? 100 : 0,\n      unmappedSteps: hasCoverage ? [] : ac.steps,\n    });\n\n    if (!hasCoverage) {\n      issues.push({\n        code: 'AC_NOT_IN_CODE',\n        message: `${ac.id}: ${ac.title} is not covered in generated test`,\n        severity: 'error',\n        field: ac.id,\n        suggestion: 'Regenerate the test or add manual test.step',\n      });\n    }\n  }\n\n  // Check for orphan test steps (not matching any AC)\n  for (const step of testSteps) {\n    if (!acceptanceCriteria.find((ac) => ac.id === step.id)) {\n      issues.push({\n        code: 'ORPHAN_TEST_STEP',\n        message: `test.step '${step.id}' does not match any acceptance criterion`,\n        severity: 'warning',\n        suggestion: 'Remove orphan step or add corresponding AC',\n      });\n    }\n  }\n\n  // Calculate overall stats\n  const totalACs = perAC.length;\n  const coveredACs = perAC.filter((ac) => ac.hasCoverage).length;\n  const overallCoverage = totalACs > 0 ? (coveredACs / totalACs) * 100 : 100;\n\n  return {\n    fullCoverage: coveredACs === totalACs,\n    totalACs,\n    coveredACs,\n    overallCoverage,\n    perAC,\n    issues,\n  };\n}\n\n/**\n * Generate coverage report as markdown\n */\nexport function generateCoverageReport(result: CoverageResult): string {\n  const lines: string[] = [];\n\n  lines.push('# AC Coverage Report');\n  lines.push('');\n  lines.push(`**Overall Coverage**: ${Math.round(result.overallCoverage)}% (${result.coveredACs}/${result.totalACs} ACs)`);\n  lines.push('');\n\n  if (result.fullCoverage) {\n    lines.push(' All acceptance criteria are covered');\n  } else {\n    lines.push(' Some acceptance criteria are missing coverage');\n  }\n\n  lines.push('');\n  lines.push('## Per-AC Coverage');\n  lines.push('');\n  lines.push('| AC ID | Title | Coverage | Status |');\n  lines.push('|-------|-------|----------|--------|');\n\n  for (const ac of result.perAC) {\n    const status = ac.hasCoverage ? (ac.coveragePercent >= 80 ? '' : '') : '';\n    lines.push(\n      `| ${ac.acId} | ${ac.acTitle.slice(0, 30)}${ac.acTitle.length > 30 ? '...' : ''} | ${Math.round(ac.coveragePercent)}% | ${status} |`\n    );\n  }\n\n  if (result.issues.length > 0) {\n    lines.push('');\n    lines.push('## Issues');\n    lines.push('');\n    for (const issue of result.issues) {\n      const icon = issue.severity === 'error' ? '' : issue.severity === 'warning' ? '' : '';\n      lines.push(`- ${icon} **${issue.code}**: ${issue.message}`);\n      if (issue.suggestion) {\n        lines.push(`  - Suggestion: ${issue.suggestion}`);\n      }\n    }\n  }\n\n  return lines.join('\\n');\n}\n","/**\n * Code Validator - Aggregate all validation checks for generated code\n * @see T044 - Generated code validator (aggregates all checks)\n */\nimport type { ValidationIssue, ValidationSeverity, JourneyValidationResult } from './journey.js';\nimport { validateJourneyFrontmatter } from './journey.js';\nimport { scanForbiddenPatterns, scanResultsToIssues, getViolationSummary } from './patterns.js';\nimport { lintCode, type LintResult } from './lint.js';\nimport { validateTagsInCode, type TagValidationResult } from './tags.js';\nimport { validateIRCoverage, type CoverageResult } from './coverage.js';\nimport type { IRJourney } from '../ir/types.js';\nimport type { JourneyFrontmatter } from '../journey/parseJourney.js';\n\n/**\n * Full validation result for generated code\n */\nexport interface CodeValidationResult {\n  /** Overall pass/fail status */\n  valid: boolean;\n  /** Journey ID being validated */\n  journeyId: string;\n  /** All validation issues */\n  issues: ValidationIssue[];\n  /** Issue counts by severity */\n  counts: {\n    errors: number;\n    warnings: number;\n    info: number;\n  };\n  /** Individual validation results */\n  details: {\n    frontmatter?: JourneyValidationResult;\n    patterns: {\n      valid: boolean;\n      violationCount: number;\n    };\n    lint?: LintResult;\n    tags?: TagValidationResult;\n    coverage?: CoverageResult;\n  };\n  /** Validation timestamp */\n  timestamp: string;\n}\n\n/**\n * Options for code validation\n */\nexport interface CodeValidationOptions {\n  /** Whether to run ESLint */\n  runLint?: boolean;\n  /** Whether to validate tags */\n  validateTags?: boolean;\n  /** Whether to validate coverage */\n  validateCoverage?: boolean;\n  /** Whether to validate frontmatter */\n  validateFrontmatter?: boolean;\n  /** Custom forbidden patterns to check */\n  customPatterns?: RegExp[];\n  /** Minimum coverage percentage */\n  minCoverage?: number;\n  /** Allow drafts for generation */\n  allowDrafts?: boolean;\n}\n\nconst DEFAULT_OPTIONS: CodeValidationOptions = {\n  runLint: false, // ESLint requires setup, disabled by default\n  validateTags: true,\n  validateCoverage: true,\n  validateFrontmatter: true,\n  minCoverage: 80,\n  allowDrafts: false,\n};\n\n/**\n * Validate generated test code\n */\nexport async function validateCode(\n  code: string,\n  journey: IRJourney,\n  frontmatter?: JourneyFrontmatter,\n  options: CodeValidationOptions = {}\n): Promise<CodeValidationResult> {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n  const allIssues: ValidationIssue[] = [];\n  const details: CodeValidationResult['details'] = {\n    patterns: { valid: true, violationCount: 0 },\n  };\n\n  // 1. Frontmatter validation\n  if (opts.validateFrontmatter && frontmatter) {\n    const frontmatterResult = validateJourneyFrontmatter(frontmatter, {\n      allowDrafts: opts.allowDrafts,\n    });\n    details.frontmatter = frontmatterResult;\n    allIssues.push(...frontmatterResult.issues);\n  }\n\n  // 2. Forbidden pattern scan\n  const patternResults = scanForbiddenPatterns(code);\n  const patternIssues = scanResultsToIssues(patternResults);\n  allIssues.push(...patternIssues);\n\n  const patternSummary = getViolationSummary(patternResults);\n  details.patterns = {\n    valid: patternSummary.errors === 0,\n    violationCount: patternSummary.total,\n  };\n\n  // 3. ESLint (optional)\n  if (opts.runLint) {\n    const lintResult = await lintCode(code, `${journey.id.toLowerCase()}.spec.ts`);\n    details.lint = lintResult;\n    allIssues.push(...lintResult.issues);\n  }\n\n  // 4. Tag validation\n  if (opts.validateTags) {\n    const tagResult = validateTagsInCode(code, journey.id, journey.tier, journey.scope);\n    details.tags = tagResult;\n    allIssues.push(...tagResult.issues);\n  }\n\n  // 5. Coverage validation\n  if (opts.validateCoverage) {\n    const coverageResult = validateIRCoverage(journey, {\n      minCoverage: opts.minCoverage,\n      warnPartialCoverage: true,\n    });\n    details.coverage = coverageResult;\n    allIssues.push(...coverageResult.issues);\n  }\n\n  // Calculate counts\n  const counts = {\n    errors: allIssues.filter((i) => i.severity === 'error').length,\n    warnings: allIssues.filter((i) => i.severity === 'warning').length,\n    info: allIssues.filter((i) => i.severity === 'info').length,\n  };\n\n  return {\n    valid: counts.errors === 0,\n    journeyId: journey.id,\n    issues: allIssues,\n    counts,\n    details,\n    timestamp: new Date().toISOString(),\n  };\n}\n\n/**\n * Synchronous validation (without ESLint)\n */\nexport function validateCodeSync(\n  code: string,\n  journey: IRJourney,\n  frontmatter?: JourneyFrontmatter,\n  options: Omit<CodeValidationOptions, 'runLint'> = {}\n): CodeValidationResult {\n  const opts = { ...DEFAULT_OPTIONS, ...options, runLint: false };\n  const allIssues: ValidationIssue[] = [];\n  const details: CodeValidationResult['details'] = {\n    patterns: { valid: true, violationCount: 0 },\n  };\n\n  // 1. Frontmatter validation\n  if (opts.validateFrontmatter && frontmatter) {\n    const frontmatterResult = validateJourneyFrontmatter(frontmatter, {\n      allowDrafts: opts.allowDrafts,\n    });\n    details.frontmatter = frontmatterResult;\n    allIssues.push(...frontmatterResult.issues);\n  }\n\n  // 2. Forbidden pattern scan\n  const patternResults = scanForbiddenPatterns(code);\n  const patternIssues = scanResultsToIssues(patternResults);\n  allIssues.push(...patternIssues);\n\n  const patternSummary = getViolationSummary(patternResults);\n  details.patterns = {\n    valid: patternSummary.errors === 0,\n    violationCount: patternSummary.total,\n  };\n\n  // 3. Tag validation\n  if (opts.validateTags) {\n    const tagResult = validateTagsInCode(code, journey.id, journey.tier, journey.scope);\n    details.tags = tagResult;\n    allIssues.push(...tagResult.issues);\n  }\n\n  // 4. Coverage validation\n  if (opts.validateCoverage) {\n    const coverageResult = validateIRCoverage(journey, {\n      minCoverage: opts.minCoverage,\n      warnPartialCoverage: true,\n    });\n    details.coverage = coverageResult;\n    allIssues.push(...coverageResult.issues);\n  }\n\n  // Calculate counts\n  const counts = {\n    errors: allIssues.filter((i) => i.severity === 'error').length,\n    warnings: allIssues.filter((i) => i.severity === 'warning').length,\n    info: allIssues.filter((i) => i.severity === 'info').length,\n  };\n\n  return {\n    valid: counts.errors === 0,\n    journeyId: journey.id,\n    issues: allIssues,\n    counts,\n    details,\n    timestamp: new Date().toISOString(),\n  };\n}\n\n/**\n * Quick pass/fail check\n */\nexport function isCodeValid(\n  code: string,\n  journey: IRJourney,\n  frontmatter?: JourneyFrontmatter\n): boolean {\n  const result = validateCodeSync(code, journey, frontmatter);\n  return result.valid;\n}\n\n/**\n * Generate validation report as markdown\n */\nexport function generateValidationReport(result: CodeValidationResult): string {\n  const lines: string[] = [];\n\n  lines.push('# Code Validation Report');\n  lines.push('');\n  lines.push(`**Journey**: ${result.journeyId}`);\n  lines.push(`**Status**: ${result.valid ? ' PASSED' : ' FAILED'}`);\n  lines.push(`**Timestamp**: ${result.timestamp}`);\n  lines.push('');\n\n  lines.push('## Summary');\n  lines.push('');\n  lines.push(`- Errors: ${result.counts.errors}`);\n  lines.push(`- Warnings: ${result.counts.warnings}`);\n  lines.push(`- Info: ${result.counts.info}`);\n  lines.push('');\n\n  lines.push('## Validation Checks');\n  lines.push('');\n\n  // Frontmatter\n  if (result.details.frontmatter) {\n    const fm = result.details.frontmatter;\n    lines.push(`### Frontmatter: ${fm.valid ? '' : ''}`);\n    lines.push('');\n  }\n\n  // Patterns\n  const patterns = result.details.patterns;\n  lines.push(`### Forbidden Patterns: ${patterns.valid ? '' : ''}`);\n  lines.push(`- Violations found: ${patterns.violationCount}`);\n  lines.push('');\n\n  // ESLint\n  if (result.details.lint) {\n    const lint = result.details.lint;\n    lines.push(`### ESLint: ${lint.passed ? '' : ''}`);\n    lines.push(`- Errors: ${lint.errorCount}`);\n    lines.push(`- Warnings: ${lint.warningCount}`);\n    lines.push('');\n  }\n\n  // Tags\n  if (result.details.tags) {\n    const tags = result.details.tags;\n    lines.push(`### Tags: ${tags.valid ? '' : ''}`);\n    lines.push('');\n  }\n\n  // Coverage\n  if (result.details.coverage) {\n    const coverage = result.details.coverage;\n    lines.push(`### Coverage: ${coverage.fullCoverage ? '' : ''}`);\n    lines.push(`- Overall: ${Math.round(coverage.overallCoverage)}%`);\n    lines.push(`- ACs Covered: ${coverage.coveredACs}/${coverage.totalACs}`);\n    lines.push('');\n  }\n\n  // Issues\n  if (result.issues.length > 0) {\n    lines.push('## Issues');\n    lines.push('');\n\n    const groupedIssues: Record<ValidationSeverity, ValidationIssue[]> = {\n      error: [],\n      warning: [],\n      info: [],\n    };\n\n    for (const issue of result.issues) {\n      groupedIssues[issue.severity].push(issue);\n    }\n\n    if (groupedIssues.error.length > 0) {\n      lines.push('### Errors');\n      for (const issue of groupedIssues.error) {\n        lines.push(`-  **${issue.code}**: ${issue.message}`);\n        if (issue.suggestion) {\n          lines.push(`  -  ${issue.suggestion}`);\n        }\n      }\n      lines.push('');\n    }\n\n    if (groupedIssues.warning.length > 0) {\n      lines.push('### Warnings');\n      for (const issue of groupedIssues.warning) {\n        lines.push(`-  **${issue.code}**: ${issue.message}`);\n        if (issue.suggestion) {\n          lines.push(`  -  ${issue.suggestion}`);\n        }\n      }\n      lines.push('');\n    }\n\n    if (groupedIssues.info.length > 0) {\n      lines.push('### Info');\n      for (const issue of groupedIssues.info) {\n        lines.push(`-  **${issue.code}**: ${issue.message}`);\n        if (issue.suggestion) {\n          lines.push(`  -  ${issue.suggestion}`);\n        }\n      }\n      lines.push('');\n    }\n  }\n\n  return lines.join('\\n');\n}\n"]}