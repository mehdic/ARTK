{"version":3,"sources":["../../src/config/schema.ts","../../src/config/loader.ts"],"names":["parseYaml"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Zod schema for autogen.config.yml\n * @see research/2026-01-02_autogen-refined-plan.md Section 7\n */\nimport { z } from 'zod';\n\n/**\n * Selector strategy types following Playwright priority\n */\nexport const SelectorStrategySchema = z.enum([\n  'role',\n  'label',\n  'placeholder',\n  'text',\n  'testid',\n  'css',\n]);\n\n/**\n * Path configuration for generated artifacts\n */\nexport const PathsSchema = z.object({\n  journeys: z.string().default('journeys'),\n  modules: z.string().default('e2e/modules'),\n  tests: z.string().default('e2e/tests'),\n  templates: z.string().default('artk/templates'),\n  catalog: z.string().default('artk/selectors'),\n});\n\n/**\n * ESLint rule severity\n */\nexport const EslintSeveritySchema = z.enum(['error', 'warn', 'off']);\n\n/**\n * ESLint rules configuration\n */\nexport const EslintRulesSchema = z.record(z.string(), EslintSeveritySchema).default({\n  'no-wait-for-timeout': 'error',\n  'no-force-option': 'error',\n  'prefer-web-first-assertions': 'error',\n});\n\n/**\n * Selector policy configuration\n */\nexport const SelectorPolicySchema = z.object({\n  priority: z.array(SelectorStrategySchema).default([\n    'role',\n    'label',\n    'placeholder',\n    'text',\n    'testid',\n    'css',\n  ]),\n  forbiddenPatterns: z.array(z.string()).default([]),\n});\n\n/**\n * Validation configuration\n */\nexport const ValidationSchema = z.object({\n  eslintRules: EslintRulesSchema.default({\n    'no-wait-for-timeout': 'error',\n    'no-force-option': 'error',\n    'prefer-web-first-assertions': 'error',\n  }),\n  customRules: z.array(z.string()).default([]),\n});\n\n/**\n * Healing configuration\n */\nexport const HealSchema = z.object({\n  enabled: z.boolean().default(true),\n  maxSuggestions: z.number().min(1).max(10).default(5),\n  skipPatterns: z.array(z.string()).default([]),\n});\n\n/**\n * Code regeneration strategy\n */\nexport const RegenerationStrategySchema = z.enum(['ast', 'blocks']).default('ast');\n\n/**\n * LLKB integration level\n * - minimal: Only load patterns, no glossary extension\n * - enhance: Load patterns and extend glossary (default)\n * - aggressive: Full LLKB integration with selector overrides\n */\nexport const LLKBIntegrationLevelSchema = z.enum(['minimal', 'enhance', 'aggressive']).default('enhance');\n\n/**\n * LLKB integration configuration (optional)\n * @see research/2026-01-23_llkb-autogen-integration-specification.md\n */\nexport const LLKBIntegrationSchema = z.object({\n  /** Enable LLKB integration */\n  enabled: z.boolean().default(false),\n\n  /** Path to LLKB-generated config file */\n  configPath: z.string().optional(),\n\n  /** Path to LLKB-generated glossary file */\n  glossaryPath: z.string().optional(),\n\n  /** Integration level */\n  level: LLKBIntegrationLevelSchema,\n}).default({});\n\n/**\n * Complete AutoGen configuration schema\n */\nexport const AutogenConfigSchema = z.object({\n  version: z.literal(1).default(1),\n  paths: PathsSchema.default({}),\n  selectorPolicy: SelectorPolicySchema.default({}),\n  validation: ValidationSchema.default({}),\n  heal: HealSchema.default({}),\n  regenerationStrategy: RegenerationStrategySchema,\n  llkb: LLKBIntegrationSchema,\n});\n\n/**\n * TypeScript types derived from schemas\n */\nexport type SelectorStrategy = z.infer<typeof SelectorStrategySchema>;\nexport type Paths = z.infer<typeof PathsSchema>;\nexport type EslintSeverity = z.infer<typeof EslintSeveritySchema>;\nexport type SelectorPolicy = z.infer<typeof SelectorPolicySchema>;\nexport type Validation = z.infer<typeof ValidationSchema>;\nexport type Heal = z.infer<typeof HealSchema>;\nexport type RegenerationStrategy = z.infer<typeof RegenerationStrategySchema>;\nexport type LLKBIntegrationLevel = z.infer<typeof LLKBIntegrationLevelSchema>;\nexport type LLKBIntegration = z.infer<typeof LLKBIntegrationSchema>;\nexport type AutogenConfig = z.infer<typeof AutogenConfigSchema>;\n","/**\n * Config loader for artk/autogen.config.yml\n * @see research/2026-01-02_autogen-refined-plan.md Section 7\n * @see research/2026-01-23_llkb-autogen-integration-specification.md (LLKB integration)\n */\nimport { readFileSync, existsSync } from 'node:fs';\nimport { join, resolve } from 'node:path';\nimport { parse as parseYaml } from 'yaml';\nimport { AutogenConfigSchema, type AutogenConfig } from './schema.js';\n\n/**\n * Default config file locations to search\n */\nconst CONFIG_PATHS = [\n  'artk/autogen.config.yml',\n  'artk/autogen.config.yaml',\n  '.artk/autogen.config.yml',\n  '.artk/autogen.config.yaml',\n];\n\n/**\n * Error thrown when config loading fails\n */\nexport class ConfigLoadError extends Error {\n  constructor(\n    message: string,\n    public readonly cause?: unknown // Preserved for error chaining, used by callers\n  ) {\n    super(message);\n    this.name = 'ConfigLoadError';\n    // Store cause in standard Error.cause property if supported\n    if (cause !== undefined) {\n      (this as { cause?: unknown }).cause = cause;\n    }\n  }\n}\n\n/**\n * Find the config file in the project\n */\nexport function findConfigFile(rootDir: string): string | null {\n  for (const configPath of CONFIG_PATHS) {\n    const fullPath = join(rootDir, configPath);\n    if (existsSync(fullPath)) {\n      return fullPath;\n    }\n  }\n  return null;\n}\n\n/**\n * Load and parse the autogen config file\n * @param configPath - Path to config file, or project root to auto-detect\n * @returns Parsed and validated config\n * @throws ConfigLoadError if config cannot be loaded or is invalid\n */\nexport function loadConfig(configPath?: string): AutogenConfig {\n  const rootDir = process.cwd();\n  let resolvedPath: string;\n\n  if (configPath) {\n    resolvedPath = resolve(rootDir, configPath);\n  } else {\n    const found = findConfigFile(rootDir);\n    if (!found) {\n      // Return default config if no file found\n      console.warn(\n        'No autogen config file found, using defaults. Create artk/autogen.config.yml to customize.'\n      );\n      return AutogenConfigSchema.parse({});\n    }\n    resolvedPath = found;\n  }\n\n  if (!existsSync(resolvedPath)) {\n    throw new ConfigLoadError(`Config file not found: ${resolvedPath}`);\n  }\n\n  let rawContent: string;\n  try {\n    rawContent = readFileSync(resolvedPath, 'utf-8');\n  } catch (err) {\n    throw new ConfigLoadError(`Failed to read config file: ${resolvedPath}`, err);\n  }\n\n  let parsed: unknown;\n  try {\n    parsed = parseYaml(rawContent);\n  } catch (err) {\n    throw new ConfigLoadError(`Invalid YAML in config file: ${resolvedPath}`, err);\n  }\n\n  // Validate with Zod schema\n  const result = AutogenConfigSchema.safeParse(parsed);\n  if (!result.success) {\n    const issues = result.error.issues\n      .map((i) => `  - ${i.path.join('.')}: ${i.message}`)\n      .join('\\n');\n    throw new ConfigLoadError(\n      `Invalid config in ${resolvedPath}:\\n${issues}`,\n      result.error\n    );\n  }\n\n  return result.data;\n}\n\n/**\n * Get the default config without loading from file\n */\nexport function getDefaultConfig(): AutogenConfig {\n  return AutogenConfigSchema.parse({});\n}\n\n/**\n * Resolve a path from config relative to project root\n */\nexport function resolveConfigPath(\n  config: AutogenConfig,\n  pathKey: keyof AutogenConfig['paths'],\n  rootDir?: string\n): string {\n  const base = rootDir || process.cwd();\n  return resolve(base, config.paths[pathKey]);\n}\n\n/**\n * Load a single config file without validation error handling\n * Used internally by loadConfigs for multi-config merging\n */\nfunction loadSingleConfig(configPath: string): AutogenConfig {\n  const resolvedPath = resolve(process.cwd(), configPath);\n\n  if (!existsSync(resolvedPath)) {\n    throw new ConfigLoadError(`Config file not found: ${resolvedPath}`);\n  }\n\n  let rawContent: string;\n  try {\n    rawContent = readFileSync(resolvedPath, 'utf-8');\n  } catch (err) {\n    throw new ConfigLoadError(`Failed to read config file: ${resolvedPath}`, err);\n  }\n\n  let parsed: unknown;\n  try {\n    parsed = parseYaml(rawContent);\n  } catch (err) {\n    throw new ConfigLoadError(`Invalid YAML in config file: ${resolvedPath}`, err);\n  }\n\n  const result = AutogenConfigSchema.safeParse(parsed);\n  if (!result.success) {\n    const issues = result.error.issues\n      .map((i) => `  - ${i.path.join('.')}: ${i.message}`)\n      .join('\\n');\n    throw new ConfigLoadError(\n      `Invalid config in ${resolvedPath}:\\n${issues}`,\n      result.error\n    );\n  }\n\n  return result.data;\n}\n\n/**\n * Deep merge helper for nested objects\n * Only merges properties that are explicitly defined (not undefined)\n */\nfunction deepMerge<T extends Record<string, unknown>>(base: T, override: Partial<T>): T {\n  const result = { ...base };\n\n  for (const key of Object.keys(override) as Array<keyof T>) {\n    const overrideValue = override[key];\n    if (overrideValue !== undefined) {\n      result[key] = overrideValue as T[keyof T];\n    }\n  }\n\n  return result;\n}\n\n/**\n * Merge multiple configs with later configs taking precedence\n * Arrays are merged additively for forbiddenPatterns, but overwritten for others\n * @see research/2026-01-23_llkb-autogen-integration-specification.md Round 2\n */\nexport function mergeConfigs(configs: AutogenConfig[]): AutogenConfig {\n  if (configs.length === 0) {\n    return getDefaultConfig();\n  }\n\n  // Start with first config, then merge subsequent configs into it\n  return configs.reduce((merged, config, index) => {\n    if (index === 0) {\n      return config;\n    }\n\n    return {\n      ...merged,\n      version: config.version ?? merged.version,\n      regenerationStrategy: config.regenerationStrategy ?? merged.regenerationStrategy,\n      paths: deepMerge(merged.paths, config.paths),\n      selectorPolicy: {\n        ...merged.selectorPolicy,\n        ...config.selectorPolicy,\n        // Merge arrays additively for forbiddenPatterns\n        forbiddenPatterns: [\n          ...new Set([\n            ...(merged.selectorPolicy?.forbiddenPatterns ?? []),\n            ...(config.selectorPolicy?.forbiddenPatterns ?? []),\n          ]),\n        ],\n        // Priority is overwritten if provided, not merged\n        priority: config.selectorPolicy?.priority?.length\n          ? config.selectorPolicy.priority\n          : merged.selectorPolicy?.priority,\n      },\n      validation: {\n        ...merged.validation,\n        ...config.validation,\n        eslintRules: {\n          ...merged.validation?.eslintRules,\n          ...config.validation?.eslintRules,\n        },\n        customRules: [\n          ...new Set([\n            ...(merged.validation?.customRules ?? []),\n            ...(config.validation?.customRules ?? []),\n          ]),\n        ],\n      },\n      heal: deepMerge(merged.heal, config.heal),\n      llkb: deepMerge(merged.llkb, config.llkb),\n    };\n  });\n}\n\n/**\n * Load and merge multiple config files\n * Later configs take precedence over earlier ones\n * @param configPaths - Array of config file paths to load and merge\n * @returns Merged config\n */\nexport function loadConfigs(configPaths: string[]): AutogenConfig {\n  const existingPaths = configPaths.filter((p) => {\n    const resolved = resolve(process.cwd(), p);\n    return existsSync(resolved);\n  });\n\n  if (existingPaths.length === 0) {\n    return getDefaultConfig();\n  }\n\n  const configs = existingPaths.map((p) => loadSingleConfig(p));\n  return mergeConfigs(configs);\n}\n\n/**\n * Load LLKB extension config if present\n * @param basePath - Base path to search for LLKB config\n * @returns Partial config or null if not found\n */\nexport function loadLLKBConfig(basePath: string): AutogenConfig | null {\n  const llkbConfigPaths = [\n    join(basePath, 'autogen-llkb.config.yml'),\n    join(basePath, 'autogen-llkb.config.yaml'),\n  ];\n\n  for (const llkbConfigPath of llkbConfigPaths) {\n    if (existsSync(llkbConfigPath)) {\n      try {\n        return loadSingleConfig(llkbConfigPath);\n      } catch {\n        // If LLKB config is invalid, return null rather than failing\n        console.warn(`Warning: Invalid LLKB config at ${llkbConfigPath}, skipping`);\n        return null;\n      }\n    }\n  }\n\n  return null;\n}\n"]}