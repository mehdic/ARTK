{"version":3,"sources":["../../src/variants/index.ts"],"names":[],"mappings":";AAsBO,SAAS,aAAA,GAA6B;AAC3C,EAAA,MAAM,cAAA,GAAiB,OAAA,CAAQ,OAAA,CAAQ,KAAA,CAAM,CAAC,CAAA;AAC9C,EAAA,MAAM,WAAA,GAAc,SAAS,cAAA,CAAe,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA,IAAK,IAAA,EAAM,EAAE,CAAA;AAGrE,EAAA,MAAM,KAAA,GAAQ,OAAO,MAAA,CAAA,IAAA,KAAgB,WAAA;AAErC,EAAA,IAAI,eAAe,EAAA,EAAI;AACrB,IAAA,OAAO;AAAA,MACL,EAAA,EAAI,QAAQ,YAAA,GAAe,YAAA;AAAA,MAC3B,WAAA;AAAA,MACA,YAAA,EAAc,QAAQ,KAAA,GAAQ,KAAA;AAAA,MAC9B,iBAAA,EAAmB,QAAA;AAAA,MACnB,QAAA,EAAU;AAAA,QACR,aAAA,EAAe,IAAA;AAAA,QACf,QAAA,EAAU,IAAA;AAAA,QACV,aAAA,EAAe,IAAA;AAAA,QACf,UAAA,EAAY;AAAA;AACd,KACF;AAAA,EACF,CAAA,MAAA,IAAW,eAAe,EAAA,EAAI;AAC5B,IAAA,OAAO;AAAA,MACL,EAAA,EAAI,WAAA;AAAA,MACJ,WAAA;AAAA,MACA,YAAA,EAAc,KAAA;AAAA,MACd,iBAAA,EAAmB,QAAA;AAAA,MACnB,QAAA,EAAU;AAAA,QACR,aAAA,EAAe,IAAA;AAAA,QACf,QAAA,EAAU,IAAA;AAAA,QACV,aAAA,EAAe,IAAA;AAAA,QACf,UAAA,EAAY;AAAA;AACd,KACF;AAAA,EACF,CAAA,MAAO;AACL,IAAA,OAAO;AAAA,MACL,EAAA,EAAI,WAAA;AAAA,MACJ,WAAA;AAAA,MACA,YAAA,EAAc,KAAA;AAAA,MACd,iBAAA,EAAmB,QAAA;AAAA,MACnB,QAAA,EAAU;AAAA,QACR,aAAA,EAAe,KAAA;AAAA,QACf,QAAA,EAAU,KAAA;AAAA,QACV,aAAA,EAAe,KAAA;AAAA,QACf,UAAA,EAAY;AAAA;AACd,KACF;AAAA,EACF;AACF;AAKO,SAAS,WAAA,GAA+B;AAC7C,EAAA,OAAO,eAAc,CAAE,QAAA;AACzB;AAKO,SAAS,WAAW,OAAA,EAAyC;AAClE,EAAA,OAAO,aAAA,EAAc,CAAE,QAAA,CAAS,OAAO,CAAA;AACzC","file":"index.js","sourcesContent":["/**\n * Variant detection and feature flags for AutoGen\n */\n\nexport interface VariantInfo {\n  id: 'modern-esm' | 'modern-cjs' | 'legacy-16' | 'legacy-14';\n  nodeVersion: number;\n  moduleSystem: 'esm' | 'cjs';\n  playwrightVersion: string;\n  features: VariantFeatures;\n}\n\nexport interface VariantFeatures {\n  ariaSnapshots: boolean;\n  clockApi: boolean;\n  topLevelAwait: boolean;\n  promiseAny: boolean;\n}\n\n/**\n * Detect the current runtime variant based on Node.js version\n */\nexport function detectVariant(): VariantInfo {\n  const nodeVersionStr = process.version.slice(1);\n  const nodeVersion = parseInt(nodeVersionStr.split('.')[0] ?? '18', 10);\n\n  // Check if running in ESM context\n  const isESM = typeof import.meta !== 'undefined';\n\n  if (nodeVersion >= 18) {\n    return {\n      id: isESM ? 'modern-esm' : 'modern-cjs',\n      nodeVersion,\n      moduleSystem: isESM ? 'esm' : 'cjs',\n      playwrightVersion: '1.57.x',\n      features: {\n        ariaSnapshots: true,\n        clockApi: true,\n        topLevelAwait: true,\n        promiseAny: true,\n      },\n    };\n  } else if (nodeVersion >= 16) {\n    return {\n      id: 'legacy-16',\n      nodeVersion,\n      moduleSystem: 'cjs',\n      playwrightVersion: '1.49.x',\n      features: {\n        ariaSnapshots: true,\n        clockApi: true,\n        topLevelAwait: true,\n        promiseAny: true,\n      },\n    };\n  } else {\n    return {\n      id: 'legacy-14',\n      nodeVersion,\n      moduleSystem: 'cjs',\n      playwrightVersion: '1.33.x',\n      features: {\n        ariaSnapshots: false,\n        clockApi: false,\n        topLevelAwait: false,\n        promiseAny: false,\n      },\n    };\n  }\n}\n\n/**\n * Get feature availability for current variant\n */\nexport function getFeatures(): VariantFeatures {\n  return detectVariant().features;\n}\n\n/**\n * Check if a specific feature is available\n */\nexport function hasFeature(feature: keyof VariantFeatures): boolean {\n  return detectVariant().features[feature];\n}\n"]}