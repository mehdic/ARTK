{"version":3,"sources":["../../types/target.ts","../../types/context.ts","../../types/config.ts","../../types/auth.ts","../../types/detection.ts","../../types/submodule.ts","../../types/schemas.ts"],"names":["z","ArtkTargetSchema"],"mappings":"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","file":"index.cjs","sourcesContent":["/**\n * @module types/target\n * @description Target type definitions for ARTK E2E independent architecture.\n * Represents a frontend application to test in a monorepo.\n */\n\n/**\n * Allowed application types for ARTK targets.\n */\nexport type ArtkTargetType =\n  | 'react-spa'\n  | 'vue-spa'\n  | 'angular'\n  | 'next'\n  | 'nuxt'\n  | 'other';\n\n/**\n * Represents a frontend target in the ARTK context.\n * Stored in .artk/context.json and used for inter-prompt communication.\n *\n * @example\n * ```typescript\n * const target: ArtkTarget = {\n *   name: 'user-portal',\n *   path: '../iss-frontend',\n *   type: 'react-spa',\n *   detected_by: ['package.json:react', 'file:src/App.tsx'],\n *   description: 'Main user-facing portal'\n * };\n * ```\n */\nexport interface ArtkTarget {\n  /**\n   * Unique identifier for the target.\n   * Must be lowercase-kebab-case, e.g., 'user-portal', 'admin-dashboard'.\n   * @pattern ^[a-z][a-z0-9-]*$\n   */\n  name: string;\n\n  /**\n   * Relative path to frontend directory from artk-e2e/.\n   * Must not start with '/' or contain '..' escaping project root.\n   * @example '../iss-frontend', '../apps/web'\n   */\n  path: string;\n\n  /**\n   * Detected or specified application type.\n   */\n  type: ArtkTargetType;\n\n  /**\n   * Signals that identified this target during detection.\n   * @example ['package.json:react', 'dirname:frontend', 'file:src/App.tsx']\n   */\n  detected_by: string[];\n\n  /**\n   * Optional human-readable description.\n   */\n  description?: string;\n}\n\n/**\n * Type guard to check if a value is a valid ArtkTarget.\n */\nexport function isArtkTarget(value: unknown): value is ArtkTarget {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  return (\n    typeof obj.name === 'string' &&\n    typeof obj.path === 'string' &&\n    typeof obj.type === 'string' &&\n    ['react-spa', 'vue-spa', 'angular', 'next', 'nuxt', 'other'].includes(\n      obj.type\n    ) &&\n    Array.isArray(obj.detected_by) &&\n    obj.detected_by.every((s) => typeof s === 'string')\n  );\n}\n\n/**\n * Validates that a target name follows the lowercase-kebab-case pattern.\n */\nexport function isValidTargetName(name: string): boolean {\n  return /^[a-z][a-z0-9-]*$/.test(name);\n}\n\n/**\n * Validates that a path is relative (not absolute, no ..).\n */\nexport function isValidRelativePath(path: string): boolean {\n  // Must not start with / and must not contain ../ escaping\n  return !path.startsWith('/') && !/(^|\\/)\\.\\.(\\/|$)/.test(path);\n}\n","/**\n * @module types/context\n * @description Context type definitions for ARTK E2E independent architecture.\n * Defines the persistent state for inter-prompt communication.\n *\n * The context file (.artk/context.json) is created by /init and read by\n * subsequent commands (/discover, /journey-propose, etc.) to maintain\n * state across prompts.\n */\n\nimport { z } from 'zod';\nimport type { ArtkTarget } from './target.js';\n\n/**\n * Context schema version.\n * Update this when making breaking changes to the context schema.\n */\nexport const CONTEXT_SCHEMA_VERSION = '1.0' as const;\n\n/**\n * Persistent state for inter-prompt communication in ARTK E2E suites.\n * Stored in artk-e2e/.artk/context.json and committed to version control.\n *\n * @example\n * ```typescript\n * const context: ArtkContext = {\n *   version: '1.0',\n *   initialized_at: '2024-01-15T10:30:00Z',\n *   project: {\n *     name: 'my-monorepo',\n *     root: '..'\n *   },\n *   targets: [\n *     {\n *       name: 'user-portal',\n *       path: '../iss-frontend',\n *       type: 'react-spa',\n *       detected_by: ['package.json:react']\n *     }\n *   ],\n *   install: {\n *     artk_core_version: '1.0.0',\n *     playwright_version: '1.57.0',\n *     script_path: '/path/to/install-to-project.sh'\n *   }\n * };\n * ```\n */\nexport interface ArtkContext {\n  /**\n   * Schema version for migration support.\n   * Always '1.0' for this version.\n   */\n  version: typeof CONTEXT_SCHEMA_VERSION;\n\n  /**\n   * ISO8601 timestamp when this context was created.\n   */\n  initialized_at: string;\n\n  /**\n   * Project metadata.\n   */\n  project: {\n    /**\n     * Human-readable project name.\n     */\n    name: string;\n\n    /**\n     * Relative path to project root from artk-e2e/.\n     * Typically '..' for standard setup.\n     */\n    root: string;\n  };\n\n  /**\n   * Configured frontend targets.\n   * Must have 1-5 elements.\n   */\n  targets: ArtkTarget[];\n\n  /**\n   * Installation metadata.\n   */\n  install: {\n    /**\n     * Semantic version of @artk/core.\n     * @pattern ^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$\n     */\n    artk_core_version: string;\n\n    /**\n     * Semantic version of @playwright/test.\n     * @pattern ^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$\n     */\n    playwright_version: string;\n\n    /**\n     * Path to the install script used.\n     */\n    script_path: string;\n  };\n}\n\n/**\n * Type guard to check if a value is a valid ArtkContext.\n */\nexport function isArtkContext(value: unknown): value is ArtkContext {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  // Check version\n  if (obj.version !== CONTEXT_SCHEMA_VERSION) return false;\n\n  // Check initialized_at\n  if (typeof obj.initialized_at !== 'string') return false;\n\n  // Check project\n  if (typeof obj.project !== 'object' || obj.project === null) return false;\n  const project = obj.project as Record<string, unknown>;\n  if (typeof project.name !== 'string') return false;\n  if (typeof project.root !== 'string') return false;\n\n  // Check targets (basic check, detailed validation elsewhere)\n  if (!Array.isArray(obj.targets)) return false;\n  if (obj.targets.length < 1 || obj.targets.length > 5) return false;\n\n  // Check install\n  if (typeof obj.install !== 'object' || obj.install === null) return false;\n  const install = obj.install as Record<string, unknown>;\n  if (typeof install.artk_core_version !== 'string') return false;\n  if (typeof install.playwright_version !== 'string') return false;\n  if (typeof install.script_path !== 'string') return false;\n\n  return true;\n}\n\n/**\n * Maximum number of targets allowed.\n */\nexport const MAX_TARGETS = 5;\n\n/**\n * Minimum number of targets required.\n */\nexport const MIN_TARGETS = 1;\n\n// =============================================================================\n// Pilot-Specific Extensions (per 003-artk-pilot-launch/data-model.md)\n// =============================================================================\n\n/**\n * Pilot workflow phase tracking.\n */\nexport type PilotPhase =\n  | 'discovery'\n  | 'propose'\n  | 'define'\n  | 'implement'\n  | 'validate'\n  | 'verify';\n\n/**\n * Pilot-specific context extensions.\n */\nexport interface PilotContext {\n  /**\n   * Pilot project identifier.\n   */\n  project: 'itss' | string;\n\n  /**\n   * Current phase in the pilot workflow.\n   */\n  phase: PilotPhase;\n\n  /**\n   * Last executed command.\n   */\n  lastCommand: string;\n\n  /**\n   * Timestamp of last command execution.\n   */\n  lastCommandAt: string;\n}\n\n/**\n * Detected target with confidence information.\n */\nexport interface DetectedTarget {\n  /**\n   * Target name.\n   */\n  name: string;\n\n  /**\n   * Path to the frontend directory.\n   */\n  path: string;\n\n  /**\n   * Detected application type.\n   */\n  type: 'react-spa' | 'vue-spa' | 'angular' | 'next' | 'nuxt' | 'other';\n\n  /**\n   * Detection confidence level.\n   */\n  confidence: 'high' | 'medium' | 'low';\n\n  /**\n   * Detection signals that matched.\n   */\n  signals: string[];\n}\n\n/**\n * Discovery results context.\n */\nexport interface DiscoveryContext {\n  /**\n   * Discovered routes.\n   */\n  routes: Array<{\n    path: string;\n    name: string;\n    authRequired: boolean;\n    roles?: string[];\n  }>;\n\n  /**\n   * Discovered components.\n   */\n  components: Array<{\n    name: string;\n    path: string;\n    type: 'page' | 'layout' | 'form' | 'table' | 'modal';\n  }>;\n}\n\n/**\n * Journey tracking statistics.\n */\nexport interface JourneyStats {\n  proposed: number;\n  defined: number;\n  implemented: number;\n  verified: number;\n}\n\n/**\n * Extended ARTK Context with pilot-specific fields.\n * This extends the base ArtkContext for pilot projects.\n */\nexport interface ArtkContextExtended extends ArtkContext {\n  /**\n   * Pilot-specific context (optional).\n   */\n  pilot?: PilotContext;\n\n  /**\n   * Detected targets with confidence information.\n   */\n  detectedTargets?: DetectedTarget[];\n\n  /**\n   * Discovery results (from /discover).\n   */\n  discovery?: DiscoveryContext;\n\n  /**\n   * Journey statistics.\n   */\n  journeys?: JourneyStats;\n}\n\n// =============================================================================\n// Zod Schemas for Validation\n// =============================================================================\n\n/**\n * Zod schema for ArtkTarget.\n */\nexport const ArtkTargetSchema = z.object({\n  name: z.string().regex(/^[a-z][a-z0-9-]*$/),\n  path: z.string(),\n  type: z.enum(['react-spa', 'vue-spa', 'angular', 'next', 'nuxt', 'other']),\n  detected_by: z.array(z.string()),\n  description: z.string().optional(),\n});\n\n/**\n * Zod schema for PilotContext.\n */\nexport const PilotContextSchema = z.object({\n  project: z.string(),\n  phase: z.enum([\n    'discovery',\n    'propose',\n    'define',\n    'implement',\n    'validate',\n    'verify',\n  ]),\n  lastCommand: z.string(),\n  lastCommandAt: z.string(),\n});\n\n/**\n * Zod schema for DetectedTarget.\n */\nexport const DetectedTargetSchema = z.object({\n  name: z.string(),\n  path: z.string(),\n  type: z.enum(['react-spa', 'vue-spa', 'angular', 'next', 'nuxt', 'other']),\n  confidence: z.enum(['high', 'medium', 'low']),\n  signals: z.array(z.string()),\n});\n\n/**\n * Zod schema for DiscoveryContext.\n */\nexport const DiscoveryContextSchema = z.object({\n  routes: z.array(\n    z.object({\n      path: z.string(),\n      name: z.string(),\n      authRequired: z.boolean(),\n      roles: z.array(z.string()).optional(),\n    })\n  ),\n  components: z.array(\n    z.object({\n      name: z.string(),\n      path: z.string(),\n      type: z.enum(['page', 'layout', 'form', 'table', 'modal']),\n    })\n  ),\n});\n\n/**\n * Zod schema for JourneyStats.\n */\nexport const JourneyStatsSchema = z.object({\n  proposed: z.number().int().min(0),\n  defined: z.number().int().min(0),\n  implemented: z.number().int().min(0),\n  verified: z.number().int().min(0),\n});\n\n/**\n * Zod schema for base ArtkContext (internal use only).\n * Note: The canonical ArtkContextSchema in schemas.ts has additional validation.\n * This simpler version is used here for .extend() support.\n */\nconst ArtkContextSchemaBase = z.object({\n  version: z.literal(CONTEXT_SCHEMA_VERSION),\n  initialized_at: z.string(),\n  project: z.object({\n    name: z.string(),\n    root: z.string(),\n  }),\n  targets: z.array(ArtkTargetSchema).min(1).max(5),\n  install: z.object({\n    artk_core_version: z.string(),\n    playwright_version: z.string(),\n    script_path: z.string(),\n  }),\n});\n\n/**\n * Zod schema for extended ArtkContext with pilot fields.\n */\nexport const ArtkContextExtendedSchema = ArtkContextSchemaBase.extend({\n  pilot: PilotContextSchema.optional(),\n  detectedTargets: z.array(DetectedTargetSchema).optional(),\n  discovery: DiscoveryContextSchema.optional(),\n  journeys: JourneyStatsSchema.optional(),\n});\n\n/**\n * Validates an ArtkContext object using Zod (internal version).\n * Note: This uses the base schema. For full validation with refinements,\n * use validateArtkContext from schemas.ts.\n */\nexport function validateArtkContext(\n  value: unknown\n): { success: true; data: ArtkContext } | { success: false; error: z.ZodError } {\n  const result = ArtkContextSchemaBase.safeParse(value);\n  if (result.success) {\n    return { success: true, data: result.data };\n  }\n  return { success: false, error: result.error };\n}\n\n/**\n * Validates an extended ArtkContext object using Zod.\n */\nexport function validateArtkContextExtended(\n  value: unknown\n): { success: true; data: ArtkContextExtended } | { success: false; error: z.ZodError } {\n  const result = ArtkContextExtendedSchema.safeParse(value);\n  if (result.success) {\n    return { success: true, data: result.data as ArtkContextExtended };\n  }\n  return { success: false, error: result.error };\n}\n","/**\n * @module types/config\n * @description Configuration type definitions for ARTK E2E independent architecture.\n * Defines the main configuration file schema (artk.config.yml).\n */\n\nimport type { ArtkTargetType } from './target.js';\nimport type { ArtkAuthConfig } from './auth.js';\n\n/**\n * Config schema version.\n * Update this when making breaking changes to the config schema.\n */\nexport const CONFIG_SCHEMA_VERSION = '2.0' as const;\n\n/**\n * Supported browser types.\n */\nexport type ArtkBrowserType = 'chromium' | 'firefox' | 'webkit';\n\n/**\n * Environment-specific URLs for a target.\n */\nexport interface ArtkEnvironmentUrls {\n  /**\n   * Base URL for the environment.\n   * @format uri\n   */\n  baseUrl: string;\n\n  /**\n   * Optional API URL if different from baseUrl.\n   * @format uri\n   */\n  apiUrl?: string;\n}\n\n/**\n * Extended target configuration with per-environment URLs.\n * Used in artk.config.yml.\n */\nexport interface ArtkConfigTarget {\n  /**\n   * Unique identifier for the target.\n   * Must be lowercase-kebab-case.\n   * @pattern ^[a-z][a-z0-9-]*$\n   */\n  name: string;\n\n  /**\n   * Relative path to frontend directory from artk-e2e/.\n   */\n  path: string;\n\n  /**\n   * Application type.\n   */\n  type: ArtkTargetType;\n\n  /**\n   * Optional human-readable description.\n   */\n  description?: string;\n\n  /**\n   * Environment-specific URLs.\n   * Keys are environment names (e.g., 'local', 'staging', 'production').\n   */\n  environments: Record<string, ArtkEnvironmentUrls>;\n}\n\n/**\n * Browser configuration settings.\n */\nexport interface ArtkBrowserConfig {\n  /**\n   * Enabled browser types.\n   * @default ['chromium']\n   */\n  enabled: ArtkBrowserType[];\n\n  /**\n   * Whether to run in headless mode.\n   * @default true\n   */\n  headless: boolean;\n}\n\n/**\n * Timeout configuration in milliseconds.\n */\nexport interface ArtkTimeoutConfig {\n  /**\n   * Default timeout for operations.\n   * @default 30000\n   * @minimum 1000\n   */\n  default: number;\n\n  /**\n   * Navigation timeout.\n   * @default 60000\n   * @minimum 1000\n   */\n  navigation: number;\n\n  /**\n   * Authentication timeout.\n   * @default 120000\n   * @minimum 1000\n   */\n  auth: number;\n}\n\n/**\n * Main configuration file for ARTK E2E suite (artk.config.yml).\n *\n * @example\n * ```yaml\n * schemaVersion: \"2.0\"\n *\n * project:\n *   name: my-project\n *   description: E2E tests for my project\n *\n * targets:\n *   - name: user-portal\n *     path: ../iss-frontend\n *     type: react-spa\n *     environments:\n *       local:\n *         baseUrl: http://localhost:3000\n *       staging:\n *         baseUrl: https://staging.example.com\n *\n * defaults:\n *   target: user-portal\n *   environment: local\n * ```\n */\nexport interface ArtkConfig {\n  /**\n   * Schema version for backward compatibility.\n   * Always '2.0' for this version.\n   */\n  schemaVersion: typeof CONFIG_SCHEMA_VERSION;\n\n  /**\n   * Project metadata.\n   */\n  project: {\n    /**\n     * Project name.\n     */\n    name: string;\n\n    /**\n     * Optional project description.\n     */\n    description?: string;\n  };\n\n  /**\n   * Frontend targets with environment URLs.\n   * Must have 1-5 elements.\n   */\n  targets: ArtkConfigTarget[];\n\n  /**\n   * Default settings.\n   */\n  defaults: {\n    /**\n     * Default target name.\n     * Must match a targets[].name.\n     */\n    target: string;\n\n    /**\n     * Default environment name.\n     * Must exist in all targets' environments.\n     */\n    environment: string;\n  };\n\n  /**\n   * Optional authentication configuration.\n   */\n  auth?: ArtkAuthConfig;\n\n  /**\n   * Optional browser configuration.\n   */\n  browsers?: ArtkBrowserConfig;\n\n  /**\n   * Optional timeout configuration.\n   */\n  timeouts?: ArtkTimeoutConfig;\n}\n\n/**\n * Type guard to check if a value is a valid ArtkConfig.\n */\nexport function isArtkConfig(value: unknown): value is ArtkConfig {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  // Check schemaVersion\n  if (obj.schemaVersion !== CONFIG_SCHEMA_VERSION) return false;\n\n  // Check project\n  if (typeof obj.project !== 'object' || obj.project === null) return false;\n  const project = obj.project as Record<string, unknown>;\n  if (typeof project.name !== 'string') return false;\n\n  // Check targets\n  if (!Array.isArray(obj.targets)) return false;\n  if (obj.targets.length < 1 || obj.targets.length > 5) return false;\n\n  // Check defaults\n  if (typeof obj.defaults !== 'object' || obj.defaults === null) return false;\n  const defaults = obj.defaults as Record<string, unknown>;\n  if (typeof defaults.target !== 'string') return false;\n  if (typeof defaults.environment !== 'string') return false;\n\n  return true;\n}\n\n/**\n * Default browser configuration.\n */\nexport const DEFAULT_BROWSER_CONFIG: ArtkBrowserConfig = {\n  enabled: ['chromium'],\n  headless: true,\n};\n\n/**\n * Default timeout configuration.\n */\nexport const DEFAULT_TIMEOUT_CONFIG: ArtkTimeoutConfig = {\n  default: 30000,\n  navigation: 60000,\n  auth: 120000,\n};\n","/**\n * @module types/auth\n * @description Authentication type definitions for ARTK E2E independent architecture.\n * Defines authentication provider configuration and role definitions.\n */\n\n/**\n * Supported authentication provider types.\n */\nexport type ArtkAuthProvider = 'oidc' | 'saml' | 'basic' | 'custom';\n\n/**\n * Supported identity provider types for OIDC authentication.\n */\nexport type ArtkIdpType = 'keycloak' | 'auth0' | 'okta' | 'azure-ad' | 'other';\n\n/**\n * Credentials configuration using environment variables.\n */\nexport interface ArtkCredentialsEnv {\n  /**\n   * Environment variable name for username.\n   * @pattern ^[A-Z][A-Z0-9_]*$\n   * @example 'ISS_USER'\n   */\n  username: string;\n\n  /**\n   * Environment variable name for password.\n   * @pattern ^[A-Z][A-Z0-9_]*$\n   * @example 'ISS_PASSWORD'\n   */\n  password: string;\n}\n\n/**\n * A user role with credentials from environment variables.\n *\n * @example\n * ```typescript\n * const adminRole: ArtkRole = {\n *   credentialsEnv: {\n *     username: 'ADMIN_USER',\n *     password: 'ADMIN_PASSWORD'\n *   },\n *   totpSecretEnv: 'ADMIN_TOTP_SECRET',\n *   storageState: {\n *     'user-portal': '.auth-states/user-portal/admin.json'\n *   }\n * };\n * ```\n */\nexport interface ArtkRole {\n  /**\n   * Environment variable names for credentials.\n   */\n  credentialsEnv: ArtkCredentialsEnv;\n\n  /**\n   * TOTP secret environment variable (if MFA enabled).\n   * @pattern ^[A-Z][A-Z0-9_]*$\n   */\n  totpSecretEnv?: string;\n\n  /**\n   * Per-target storage state path overrides.\n   * Keys are target names, values are relative paths to storage state files.\n   */\n  storageState?: Record<string, string>;\n}\n\n/**\n * Per-environment authentication URLs.\n */\nexport interface ArtkAuthEnvironmentUrls {\n  /**\n   * Login URL for this environment.\n   * @format uri\n   */\n  loginUrl: string;\n\n  /**\n   * Optional logout URL for this environment.\n   * @format uri\n   */\n  logoutUrl?: string;\n}\n\n/**\n * Authentication provider configuration.\n *\n * @example\n * ```typescript\n * const authConfig: ArtkAuthConfig = {\n *   provider: 'oidc',\n *   idpType: 'keycloak',\n *   storageStateDir: '.auth-states',\n *   environments: {\n *     local: {\n *       loginUrl: 'http://localhost:8080/auth/realms/main/protocol/openid-connect/auth'\n *     },\n *     staging: {\n *       loginUrl: 'https://auth.staging.example.com/login',\n *       logoutUrl: 'https://auth.staging.example.com/logout'\n *     }\n *   },\n *   roles: {\n *     admin: {\n *       credentialsEnv: { username: 'ADMIN_USER', password: 'ADMIN_PASSWORD' },\n *       totpSecretEnv: 'ADMIN_TOTP'\n *     },\n *     user: {\n *       credentialsEnv: { username: 'USER_NAME', password: 'USER_PASSWORD' }\n *     }\n *   }\n * };\n * ```\n */\nexport interface ArtkAuthConfig {\n  /**\n   * Authentication provider type.\n   */\n  provider: ArtkAuthProvider;\n\n  /**\n   * Identity provider type (for OIDC provider).\n   */\n  idpType?: ArtkIdpType;\n\n  /**\n   * Directory for storage states (relative to artk-e2e/).\n   * @default '.auth-states'\n   */\n  storageStateDir: string;\n\n  /**\n   * Per-environment authentication URLs.\n   * Keys are environment names (e.g., 'local', 'staging', 'production').\n   */\n  environments: Record<string, ArtkAuthEnvironmentUrls>;\n\n  /**\n   * Role definitions.\n   * Keys are role names (e.g., 'admin', 'user', 'readonly').\n   */\n  roles: Record<string, ArtkRole>;\n}\n\n/**\n * Type guard to check if a value is a valid ArtkRole.\n */\nexport function isArtkRole(value: unknown): value is ArtkRole {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  // Check credentialsEnv\n  if (typeof obj.credentialsEnv !== 'object' || obj.credentialsEnv === null)\n    return false;\n  const creds = obj.credentialsEnv as Record<string, unknown>;\n  if (typeof creds.username !== 'string' || creds.username.length === 0)\n    return false;\n  if (typeof creds.password !== 'string' || creds.password.length === 0)\n    return false;\n\n  // Check totpSecretEnv (optional)\n  if (\n    obj.totpSecretEnv !== undefined &&\n    typeof obj.totpSecretEnv !== 'string'\n  ) {\n    return false;\n  }\n\n  // Check storageState (optional)\n  if (obj.storageState !== undefined) {\n    if (typeof obj.storageState !== 'object' || obj.storageState === null) {\n      return false;\n    }\n    const storage = obj.storageState as Record<string, unknown>;\n    for (const [, v] of Object.entries(storage)) {\n      if (typeof v !== 'string') return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Validates that an environment variable name follows the expected pattern.\n * @pattern ^[A-Z][A-Z0-9_]*$\n */\nexport function isValidEnvVarName(name: string): boolean {\n  return /^[A-Z][A-Z0-9_]*$/.test(name);\n}\n\n/**\n * Type guard to check if a value is a valid ArtkAuthConfig.\n */\nexport function isArtkAuthConfig(value: unknown): value is ArtkAuthConfig {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  // Check provider\n  if (\n    !['oidc', 'saml', 'basic', 'custom'].includes(obj.provider as string)\n  ) {\n    return false;\n  }\n\n  // Check idpType (optional)\n  if (obj.idpType !== undefined) {\n    if (\n      !['keycloak', 'auth0', 'okta', 'azure-ad', 'other'].includes(\n        obj.idpType as string\n      )\n    ) {\n      return false;\n    }\n  }\n\n  // Check storageStateDir\n  if (typeof obj.storageStateDir !== 'string') return false;\n\n  // Check environments\n  if (typeof obj.environments !== 'object' || obj.environments === null) {\n    return false;\n  }\n  const envs = obj.environments as Record<string, unknown>;\n  for (const [, env] of Object.entries(envs)) {\n    if (typeof env !== 'object' || env === null) return false;\n    const envObj = env as Record<string, unknown>;\n    if (typeof envObj.loginUrl !== 'string') return false;\n    if (\n      envObj.logoutUrl !== undefined &&\n      typeof envObj.logoutUrl !== 'string'\n    ) {\n      return false;\n    }\n  }\n\n  // Check roles\n  if (typeof obj.roles !== 'object' || obj.roles === null) return false;\n  const roles = obj.roles as Record<string, unknown>;\n  for (const [, role] of Object.entries(roles)) {\n    if (!isArtkRole(role)) return false;\n  }\n\n  return true;\n}\n\n/**\n * Default storage state directory.\n */\nexport const DEFAULT_STORAGE_STATE_DIR = '.auth-states';\n","/**\n * @module types/detection\n * @description Detection type definitions for ARTK E2E independent architecture.\n * Defines types for frontend detection heuristics during /init.\n */\n\nimport type { ArtkTargetType } from './target.js';\n\n/**\n * Confidence levels for detection results.\n * Based on weighted scoring: ≥40=high, 20-39=medium, <20=low\n */\nexport type ArtkConfidenceLevel = 'high' | 'medium' | 'low';\n\n/**\n * Detection signal categories.\n */\nexport type ArtkDetectionSignalCategory =\n  | 'package-dependency'\n  | 'entry-file'\n  | 'directory-name'\n  | 'index-html'\n  | 'config-file';\n\n/**\n * A single detection signal with its weight and source.\n *\n * @example\n * ```typescript\n * const signal: DetectionSignal = {\n *   type: 'package-dependency',\n *   source: 'package-dependency:react',\n *   weight: 30,\n *   description: 'Found react in dependencies'\n * };\n * ```\n */\nexport interface DetectionSignal {\n  /**\n   * Category of the signal.\n   */\n  type: ArtkDetectionSignalCategory;\n\n  /**\n   * Source identifier - the full signal string\n   * (e.g., 'package-dependency:react', 'entry-file:src/App.tsx').\n   */\n  source: string;\n\n  /**\n   * Weight contribution to the overall score.\n   */\n  weight: number;\n\n  /**\n   * Human-readable description of what was detected.\n   */\n  description?: string;\n}\n\n/**\n * Result of frontend detection heuristics during /init.\n * Transient - not persisted, used only during detection.\n *\n * @example\n * ```typescript\n * const result: DetectionResult = {\n *   path: '/absolute/path/to/frontend',\n *   relativePath: '../frontend',\n *   confidence: 'high',\n *   type: 'react-spa',\n *   signals: ['package-dependency:react', 'entry-file:src/App.tsx'],\n *   score: 50,\n *   detailedSignals: [\n *     { type: 'package-dependency', source: 'package-dependency:react', weight: 30 },\n *     { type: 'entry-file', source: 'entry-file:src/App.tsx', weight: 20 }\n *   ]\n * };\n * ```\n */\nexport interface DetectionResult {\n  /**\n   * Absolute path to detected frontend.\n   */\n  path: string;\n\n  /**\n   * Relative path from artk-e2e/ to the frontend.\n   */\n  relativePath: string;\n\n  /**\n   * Detection confidence level.\n   * Based on weighted scoring: ≥40=high, 20-39=medium, <20=low\n   */\n  confidence: ArtkConfidenceLevel;\n\n  /**\n   * Detected application type.\n   */\n  type: ArtkTargetType;\n\n  /**\n   * Detection signal identifiers that matched.\n   * @example ['package-dependency:react', 'entry-file:src/App.tsx', 'directory-name:frontend']\n   */\n  signals: string[];\n\n  /**\n   * Combined score from weighted signals.\n   */\n  score: number;\n\n  /**\n   * Detailed signal information for debugging and analysis.\n   */\n  detailedSignals: DetectionSignal[];\n}\n\n// Note: Signal weights and confidence thresholds are defined in detection/signals.ts\n// Import SIGNAL_WEIGHTS, CONFIDENCE_THRESHOLDS, and getConfidenceFromScore from there.\n// This file only contains type definitions to avoid duplication.\n\n/**\n * Type guard to check if a value is a valid DetectionResult.\n */\nexport function isDetectionResult(value: unknown): value is DetectionResult {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  // Check path\n  if (typeof obj.path !== 'string') return false;\n\n  // Check relativePath\n  if (typeof obj.relativePath !== 'string') return false;\n\n  // Check confidence\n  if (!['high', 'medium', 'low'].includes(obj.confidence as string)) {\n    return false;\n  }\n\n  // Check type\n  if (\n    !['react-spa', 'vue-spa', 'angular', 'next', 'nuxt', 'other'].includes(\n      obj.type as string\n    )\n  ) {\n    return false;\n  }\n\n  // Check signals\n  if (!Array.isArray(obj.signals)) return false;\n  if (!obj.signals.every((s) => typeof s === 'string')) return false;\n\n  // Check score\n  if (typeof obj.score !== 'number') return false;\n\n  // Check detailedSignals (required array of DetectionSignal objects)\n  if (!Array.isArray(obj.detailedSignals)) return false;\n  if (\n    !obj.detailedSignals.every(\n      (s) =>\n        typeof s === 'object' &&\n        s !== null &&\n        typeof (s as Record<string, unknown>).type === 'string' &&\n        typeof (s as Record<string, unknown>).source === 'string' &&\n        typeof (s as Record<string, unknown>).weight === 'number'\n    )\n  ) {\n    return false;\n  }\n\n  return true;\n}\n","/**\n * @module types/submodule\n * @description Submodule type definitions for ARTK E2E independent architecture.\n * Defines types for Git submodule state during /init.\n */\n\n/**\n * Git submodule initialization states.\n */\nexport type SubmoduleState = 'initialized' | 'uninitialized' | 'not-submodule';\n\n/**\n * Git submodule state for warning users.\n * Transient - not persisted, used only during /init.\n *\n * @example\n * ```typescript\n * const status: SubmoduleStatus = {\n *   path: 'libs/shared-ui',\n *   initialized: true,\n *   commit: 'abc123def456...',\n *   url: 'https://github.com/org/shared-ui.git'\n * };\n * ```\n */\nexport interface SubmoduleStatus {\n  /**\n   * Path to submodule (from .gitmodules).\n   */\n  path: string;\n\n  /**\n   * Whether the submodule is initialized.\n   */\n  initialized: boolean;\n\n  /**\n   * Commit SHA if initialized.\n   */\n  commit?: string;\n\n  /**\n   * Remote URL of the submodule (from .gitmodules).\n   */\n  url?: string;\n\n  /**\n   * Optional warning message if submodule affects testing.\n   */\n  warning?: string;\n}\n\n/**\n * Result of scanning all submodules in a project.\n *\n * @example\n * ```typescript\n * const result: SubmoduleScanResult = {\n *   hasSubmodules: true,\n *   submodules: [\n *     { path: 'libs/shared-ui', initialized: true, commit: 'abc123...' },\n *     { path: 'libs/legacy', initialized: false, warning: 'Submodule not initialized' }\n *   ],\n *   warnings: ['Some submodules are not initialized. Run: git submodule update --init']\n * };\n * ```\n */\nexport interface SubmoduleScanResult {\n  /**\n   * Whether the scanned path is a submodule.\n   * Used when scanning a single directory.\n   */\n  isSubmodule: boolean;\n\n  /**\n   * The scanned path.\n   */\n  path: string;\n\n  /**\n   * Relative path from repo root (if is a submodule).\n   */\n  relativePath?: string;\n\n  /**\n   * Submodule status details (if is a submodule).\n   */\n  status?: SubmoduleStatus;\n\n  /**\n   * Whether the project has any submodules.\n   * @deprecated Use isSubmodule for single path checks\n   */\n  hasSubmodules?: boolean;\n\n  /**\n   * List of submodule statuses (for bulk scans).\n   */\n  submodules?: SubmoduleStatus[];\n\n  /**\n   * Warnings about submodule state.\n   */\n  warnings?: string[];\n}\n\n/**\n * Type guard to check if a value is a valid SubmoduleStatus.\n */\nexport function isSubmoduleStatus(value: unknown): value is SubmoduleStatus {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  // Check path\n  if (typeof obj.path !== 'string') return false;\n\n  // Check initialized\n  if (typeof obj.initialized !== 'boolean') return false;\n\n  // Check commit (optional)\n  if (obj.commit !== undefined && typeof obj.commit !== 'string') return false;\n\n  // Check url (optional)\n  if (obj.url !== undefined && typeof obj.url !== 'string') return false;\n\n  // Check warning (optional)\n  if (obj.warning !== undefined && typeof obj.warning !== 'string') {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Type guard to check if a value is a valid SubmoduleScanResult.\n */\nexport function isSubmoduleScanResult(\n  value: unknown\n): value is SubmoduleScanResult {\n  if (typeof value !== 'object' || value === null) return false;\n  const obj = value as Record<string, unknown>;\n\n  // Check isSubmodule (required)\n  if (typeof obj.isSubmodule !== 'boolean') return false;\n\n  // Check path (required)\n  if (typeof obj.path !== 'string') return false;\n\n  // Check relativePath (optional)\n  if (obj.relativePath !== undefined && typeof obj.relativePath !== 'string') {\n    return false;\n  }\n\n  // Check status (optional)\n  if (obj.status !== undefined && !isSubmoduleStatus(obj.status)) return false;\n\n  // Check submodules (optional)\n  if (obj.submodules !== undefined) {\n    if (!Array.isArray(obj.submodules)) return false;\n    if (!obj.submodules.every(isSubmoduleStatus)) return false;\n  }\n\n  // Check warnings (optional)\n  if (obj.warnings !== undefined) {\n    if (!Array.isArray(obj.warnings)) return false;\n    if (!obj.warnings.every((w) => typeof w === 'string')) return false;\n  }\n\n  return true;\n}\n\n/**\n * Creates an empty submodule scan result.\n */\nexport function createEmptySubmoduleScanResult(\n  dirPath: string\n): SubmoduleScanResult {\n  return {\n    isSubmodule: false,\n    path: dirPath,\n    submodules: [],\n    warnings: [],\n  };\n}\n","/**\n * @module types/schemas\n * @description Zod validation schemas for ARTK E2E independent architecture.\n * Provides runtime type checking and validation for ArtkContext and ArtkConfig.\n */\n\nimport { z } from 'zod';\nimport { CONTEXT_SCHEMA_VERSION, MAX_TARGETS, MIN_TARGETS } from './context.js';\nimport { CONFIG_SCHEMA_VERSION } from './config.js';\n\n// =============================================================================\n// Primitive Schemas\n// =============================================================================\n\n/** Non-empty string */\nconst nonEmptyString = z.string().min(1, 'Must not be empty');\n\n/** Positive integer with minimum */\nconst positiveIntMin = (min: number) =>\n  z.number().int().min(min, `Must be at least ${min}`);\n\n/** Lowercase kebab-case identifier */\nconst kebabCaseId = z\n  .string()\n  .regex(\n    /^[a-z][a-z0-9-]*$/,\n    'Must be lowercase-kebab-case starting with a letter'\n  );\n\n/** Relative path (no leading /, no .. escaping) */\nconst relativePath = z\n  .string()\n  .refine((p) => !p.startsWith('/'), 'Path must be relative (no leading /)')\n  .refine(\n    (p) => !/(^|\\/)\\.\\.($|\\/)/.test(p),\n    'Path must not contain .. escaping project root'\n  );\n\n/** Environment variable name pattern */\nconst envVarName = z\n  .string()\n  .regex(/^[A-Z][A-Z0-9_]*$/, 'Must be UPPER_SNAKE_CASE');\n\n/** Semantic version pattern */\nconst semver = z\n  .string()\n  .regex(\n    /^\\d+\\.\\d+\\.\\d+(-[a-zA-Z0-9.]+)?$/,\n    'Must be valid semantic version (e.g., 1.0.0 or 1.0.0-beta.1)'\n  );\n\n/** URL format */\nconst urlString = z.string().url('Must be a valid URL');\n\n// =============================================================================\n// Target Type Schema\n// =============================================================================\n\n/** Target type schema */\nexport const ArtkTargetTypeSchema = z.enum([\n  'react-spa',\n  'vue-spa',\n  'angular',\n  'next',\n  'nuxt',\n  'other',\n]);\n\n// =============================================================================\n// ArtkTarget Schema\n// =============================================================================\n\n/**\n * Schema for ArtkTarget (used in ArtkContext).\n */\nexport const ArtkTargetSchema = z.object({\n  /** Unique identifier, lowercase-kebab-case */\n  name: kebabCaseId.describe('Unique target identifier'),\n\n  /** Relative path to frontend directory from artk-e2e/ */\n  path: relativePath.describe('Relative path to frontend'),\n\n  /** Detected or specified application type */\n  type: ArtkTargetTypeSchema,\n\n  /** Signals that identified this target during detection */\n  detected_by: z\n    .array(nonEmptyString)\n    .describe('Detection signals (e.g., package.json:react)'),\n\n  /** Optional description */\n  description: z.string().optional(),\n});\n\n// =============================================================================\n// ArtkContext Schema (T014)\n// =============================================================================\n\n/**\n * Schema for ArtkContext stored in .artk/context.json.\n * Used for inter-prompt communication.\n */\nexport const ArtkContextSchema = z\n  .object({\n    /** Schema version for migration support */\n    version: z.literal(CONTEXT_SCHEMA_VERSION, {\n      errorMap: () => ({\n        message: `Context version must be \"${CONTEXT_SCHEMA_VERSION}\"`,\n      }),\n    }),\n\n    /** When this context was created (ISO8601) */\n    initialized_at: nonEmptyString.describe('ISO8601 timestamp'),\n\n    /** Project metadata */\n    project: z.object({\n      /** Human-readable project name */\n      name: nonEmptyString,\n\n      /** Relative path to project root from artk-e2e/ */\n      root: relativePath,\n    }),\n\n    /** Configured frontend targets (1-5 max) */\n    targets: z\n      .array(ArtkTargetSchema)\n      .min(MIN_TARGETS, `At least ${MIN_TARGETS} target required`)\n      .max(MAX_TARGETS, `Maximum ${MAX_TARGETS} targets allowed`),\n\n    /** Installation metadata */\n    install: z.object({\n      /** Semantic version of @artk/core */\n      artk_core_version: semver,\n\n      /** Semantic version of @playwright/test */\n      playwright_version: semver,\n\n      /** Path to the install script used */\n      script_path: nonEmptyString,\n    }),\n  })\n  .superRefine((data, ctx) => {\n    // Validate unique target names\n    const names = data.targets.map((t) => t.name);\n    const duplicates = names.filter((n, i) => names.indexOf(n) !== i);\n    if (duplicates.length > 0) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: `Duplicate target names: ${[...new Set(duplicates)].join(', ')}`,\n        path: ['targets'],\n      });\n    }\n  });\n\n// =============================================================================\n// Auth Schemas for ArtkConfig\n// =============================================================================\n\n/** Auth provider type schema */\nexport const ArtkAuthProviderSchema = z.enum([\n  'oidc',\n  'saml',\n  'basic',\n  'custom',\n]);\n\n/** Identity provider type schema */\nexport const ArtkIdpTypeSchema = z.enum([\n  'keycloak',\n  'auth0',\n  'okta',\n  'azure-ad',\n  'other',\n]);\n\n/** Credentials environment schema */\nexport const ArtkCredentialsEnvSchema = z.object({\n  username: envVarName.describe('Env var name for username'),\n  password: envVarName.describe('Env var name for password'),\n});\n\n/** Role configuration schema */\nexport const ArtkRoleSchema = z.object({\n  /** Environment variable names for credentials */\n  credentialsEnv: ArtkCredentialsEnvSchema,\n\n  /** TOTP secret environment variable (if MFA enabled) */\n  totpSecretEnv: envVarName.optional(),\n\n  /** Per-target storage state path overrides */\n  storageState: z.record(z.string(), relativePath).optional(),\n});\n\n/** Auth environment URLs schema */\nexport const ArtkAuthEnvironmentUrlsSchema = z.object({\n  /** Login URL for this environment */\n  loginUrl: urlString,\n\n  /** Optional logout URL for this environment */\n  logoutUrl: urlString.optional(),\n});\n\n/** Auth configuration schema */\nexport const ArtkAuthConfigSchema = z.object({\n  /** Authentication provider type */\n  provider: ArtkAuthProviderSchema,\n\n  /** Identity provider type (for OIDC provider) */\n  idpType: ArtkIdpTypeSchema.optional(),\n\n  /** Directory for storage states (relative to artk-e2e/) */\n  storageStateDir: relativePath.default('.auth-states'),\n\n  /** Per-environment authentication URLs */\n  environments: z.record(z.string(), ArtkAuthEnvironmentUrlsSchema),\n\n  /** Role definitions */\n  roles: z\n    .record(z.string(), ArtkRoleSchema)\n    .refine(\n      (roles) => Object.keys(roles).length > 0,\n      'At least one role must be defined'\n    ),\n});\n\n// =============================================================================\n// Config Target Schema\n// =============================================================================\n\n/** Environment URLs schema */\nexport const ArtkEnvironmentUrlsSchema = z.object({\n  /** Base URL for the environment */\n  baseUrl: urlString,\n\n  /** Optional API URL if different from baseUrl */\n  apiUrl: urlString.optional(),\n});\n\n/** Config target schema (extended from ArtkTarget) */\nexport const ArtkConfigTargetSchema = z.object({\n  /** Unique identifier */\n  name: kebabCaseId,\n\n  /** Relative path to frontend directory */\n  path: relativePath,\n\n  /** Application type */\n  type: ArtkTargetTypeSchema,\n\n  /** Optional description */\n  description: z.string().optional(),\n\n  /** Environment-specific URLs */\n  environments: z\n    .record(z.string(), ArtkEnvironmentUrlsSchema)\n    .refine(\n      (envs) => Object.keys(envs).length > 0,\n      'At least one environment must be defined'\n    ),\n});\n\n// =============================================================================\n// Browser and Timeout Schemas\n// =============================================================================\n\n/** Browser type schema */\nexport const ArtkBrowserTypeSchema = z.enum(['chromium', 'firefox', 'webkit']);\n\n/** Browser configuration schema */\nexport const ArtkBrowserConfigSchema = z.object({\n  /** Enabled browser types */\n  enabled: z\n    .array(ArtkBrowserTypeSchema)\n    .min(1, 'At least one browser required')\n    .default(['chromium']),\n\n  /** Whether to run in headless mode */\n  headless: z.boolean().default(true),\n});\n\n/** Timeout configuration schema */\nexport const ArtkTimeoutConfigSchema = z.object({\n  /** Default timeout for operations (ms) */\n  default: positiveIntMin(1000).default(30000),\n\n  /** Navigation timeout (ms) */\n  navigation: positiveIntMin(1000).default(60000),\n\n  /** Authentication timeout (ms) */\n  auth: positiveIntMin(1000).default(120000),\n});\n\n// =============================================================================\n// ArtkConfig Schema (T015)\n// =============================================================================\n\n/**\n * Schema for ArtkConfig stored in artk.config.yml.\n * Main configuration file for ARTK E2E suite.\n */\nexport const ArtkConfigSchema = z\n  .object({\n    /** Schema version for backward compatibility */\n    schemaVersion: z.literal(CONFIG_SCHEMA_VERSION, {\n      errorMap: () => ({\n        message: `Config schema version must be \"${CONFIG_SCHEMA_VERSION}\"`,\n      }),\n    }),\n\n    /** Project metadata */\n    project: z.object({\n      /** Project name */\n      name: nonEmptyString,\n\n      /** Optional project description */\n      description: z.string().optional(),\n    }),\n\n    /** Frontend targets with environment URLs */\n    targets: z\n      .array(ArtkConfigTargetSchema)\n      .min(MIN_TARGETS, `At least ${MIN_TARGETS} target required`)\n      .max(MAX_TARGETS, `Maximum ${MAX_TARGETS} targets allowed`),\n\n    /** Default settings */\n    defaults: z.object({\n      /** Default target name (must match a targets[].name) */\n      target: nonEmptyString,\n\n      /** Default environment name (must exist in all targets' environments) */\n      environment: nonEmptyString,\n    }),\n\n    /** Optional authentication configuration */\n    auth: ArtkAuthConfigSchema.optional(),\n\n    /** Optional browser configuration */\n    browsers: ArtkBrowserConfigSchema.optional(),\n\n    /** Optional timeout configuration */\n    timeouts: ArtkTimeoutConfigSchema.optional(),\n  })\n  .superRefine((data, ctx) => {\n    // Validate unique target names\n    const names = data.targets.map((t) => t.name);\n    const duplicates = names.filter((n, i) => names.indexOf(n) !== i);\n    if (duplicates.length > 0) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: `Duplicate target names: ${[...new Set(duplicates)].join(', ')}`,\n        path: ['targets'],\n      });\n    }\n\n    // Validate defaults.target matches a targets[].name\n    if (!names.includes(data.defaults.target)) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: `defaults.target \"${data.defaults.target}\" does not match any target. Available: ${names.join(', ')}`,\n        path: ['defaults', 'target'],\n      });\n    }\n\n    // Validate defaults.environment exists in all targets\n    for (const target of data.targets) {\n      const envNames = Object.keys(target.environments);\n      if (!envNames.includes(data.defaults.environment)) {\n        ctx.addIssue({\n          code: z.ZodIssueCode.custom,\n          message: `defaults.environment \"${data.defaults.environment}\" does not exist in target \"${target.name}\". Available: ${envNames.join(', ')}`,\n          path: ['defaults', 'environment'],\n        });\n      }\n    }\n  });\n\n// =============================================================================\n// Detection Schemas (bonus)\n// =============================================================================\n\n/** Confidence level schema */\nexport const ArtkConfidenceLevelSchema = z.enum(['high', 'medium', 'low']);\n\n/** Detection signal schema */\nexport const DetectionSignalSchema = z.object({\n  type: z.enum([\n    'package-dependency',\n    'entry-file',\n    'directory-name',\n    'index-html',\n    'config-file',\n  ]),\n  source: nonEmptyString,\n  weight: z.number(),\n  description: z.string().optional(),\n});\n\n/** Detection result schema */\nexport const DetectionResultSchema = z.object({\n  path: nonEmptyString,\n  relativePath: relativePath,\n  confidence: ArtkConfidenceLevelSchema,\n  type: ArtkTargetTypeSchema,\n  signals: z.array(nonEmptyString),\n  score: z.number(),\n  detailedSignals: z.array(DetectionSignalSchema).optional(),\n});\n\n/** Submodule status schema */\nexport const SubmoduleStatusSchema = z.object({\n  path: nonEmptyString,\n  initialized: z.boolean(),\n  commit: z.string().optional(),\n  url: urlString.optional(),\n  warning: z.string().optional(),\n});\n\n/** Submodule scan result schema */\nexport const SubmoduleScanResultSchema = z.object({\n  hasSubmodules: z.boolean(),\n  submodules: z.array(SubmoduleStatusSchema),\n  warnings: z.array(z.string()),\n});\n\n// =============================================================================\n// Type Exports\n// =============================================================================\n\n/** Inferred type from ArtkContextSchema */\nexport type ArtkContextInput = z.input<typeof ArtkContextSchema>;\n\n/** Validated ArtkContext type */\nexport type ArtkContextOutput = z.output<typeof ArtkContextSchema>;\n\n/** Inferred type from ArtkConfigSchema */\nexport type ArtkConfigInput = z.input<typeof ArtkConfigSchema>;\n\n/** Validated ArtkConfig type */\nexport type ArtkConfigOutput = z.output<typeof ArtkConfigSchema>;\n\n/** Inferred type from ArtkTargetSchema */\nexport type ArtkTargetInput = z.input<typeof ArtkTargetSchema>;\n\n/** Validated ArtkTarget type */\nexport type ArtkTargetOutput = z.output<typeof ArtkTargetSchema>;\n\n// =============================================================================\n// Validation Helper Functions\n// =============================================================================\n\n/**\n * Validates an ArtkContext object.\n * @returns Validated context or throws ZodError\n */\nexport function validateArtkContext(data: unknown): ArtkContextOutput {\n  return ArtkContextSchema.parse(data);\n}\n\n/**\n * Safely validates an ArtkContext object.\n * @returns Result object with success/error\n */\nexport function safeValidateArtkContext(data: unknown) {\n  return ArtkContextSchema.safeParse(data);\n}\n\n/**\n * Validates an ArtkConfig object.\n * @returns Validated config or throws ZodError\n */\nexport function validateArtkConfig(data: unknown): ArtkConfigOutput {\n  return ArtkConfigSchema.parse(data);\n}\n\n/**\n * Safely validates an ArtkConfig object.\n * @returns Result object with success/error\n */\nexport function safeValidateArtkConfig(data: unknown) {\n  return ArtkConfigSchema.safeParse(data);\n}\n"]}